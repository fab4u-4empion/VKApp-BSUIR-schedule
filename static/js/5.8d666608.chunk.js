(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{173:function(e,t,c){"use strict";c.r(t);var r=c(25),s=c(0),n=c(11),a=c(167),o=c(169),i=c(170),l=c(171),u=c(166),j=c(30),d=c(37),b=c(168),h=c(144),O=c.n(h),g=(c(13),c(26)),f=c(9);var p=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],h=i[1],p=Object(s.useState)(!!localStorage.getItem("groups")),x=Object(r.a)(p,2),v=x[0],y=x[1],S=Object(s.useState)(!1),w=Object(r.a)(S,2),m=w[0],k=w[1],C=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),_=Object(r.a)(C,2),E=_[0],L=_[1],F=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),P=Object(r.a)(F,2),I=P[0],J=P[1],T=Object(s.useState)(history.state.groups_CurrentPage),V=Object(r.a)(T,2),G=V[0],N=V[1],A=Object(s.useState)(!1),R=Object(r.a)(A,2),q=R[0],H=R[1],W=Object(s.useState)(!1),B=Object(r.a)(W,2),X=B[0],z=B[1],D=Object(s.useState)([]),K=Object(r.a)(D,2),M=K[0],Q=K[1],U=Object(s.useState)(null),Y=Object(r.a)(U,2),Z=Y[0],$=Y[1];Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),J(E.filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){q&&I.length>30?(Q([].concat(Object(j.a)(M),Object(j.a)(I.slice(30*G,30*G+30)))),N((function(e){return e+1})),H(!1)):H(!1)}),[q]),Object(s.useEffect)((function(){N(1),Q(I.slice(0,30))}),[I]),Object(s.useEffect)((function(){v||O.a.get("https://journal.bsuir.by/api/v1/groups",{signal:c.signal}).then((function(e){console.log("test"),localStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),y((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){k(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",re),function(){window.removeEventListener("scroll",re)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",ne),function(){window.removeEventListener("popstate",ne)}}),[]);var ee=Object(g.a)(),te=ee.favoriteGroups,ce=ee.toggleGroupsFavoriteFlag,re=(ee.toggleFlagErrorSnackbar,function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&H(!0)}),se=function(){z(!0),O.a.get("https://journal.bsuir.by/api/v1/groups",{signal:c.signal}).then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),z((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),m&&(y(!0),k(!1))})).catch((function(){z(!1),$(ae)}))},ne=function(){history.state&&h(history.state.searchValue)},ae=Object(f.jsx)(n.u,{onClose:function(){return $(null)},before:Object(f.jsx)(d.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(n.f,{vertical:"top",filled:"true",children:Object(f.jsx)(n.t,{readOnly:!v||X,value:l,onChange:function(e){return X?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1},""):history.pushState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1},""),h(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(f.jsxs)(n.h,{style:{paddingTop:40},children:[!v&&!m&&Object(f.jsx)(n.p,{}),m&&Object(f.jsx)(n.r,{onRefresh:se,isFetching:X,style:{minHeight:350},children:Object(f.jsx)(n.q,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),v&&!m&&Object(f.jsxs)(n.r,{onRefresh:se,isFetching:X,style:{minHeight:350},children:[Object(f.jsx)(n.j,{children:I.length>0&&M.map((function(t){return Object(f.jsx)(n.c,{disabled:!0,before:Object(f.jsxs)(n.i,{onClick:function(){ce(t.name)},children:[te.includes(t.name)&&Object(f.jsx)(u.a,{fill:"var(--accent)"}),!te.includes(t.name)&&Object(f.jsx)(a.a,{fill:"var(--accent)"})]}),after:Object(f.jsx)(n.i,{onClick:function(){var c;c=t.name,e.onGroupSelect(c)},children:Object(f.jsx)(b.a,{fill:"var(--icon_tertiary)"})}),children:t.name},t.id)}))}),0===I.length&&Object(f.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),Z]})]})};t.default=function(){var e=Object(n.C)().viewWidth,t=Object(n.D)(),c=e>=n.B.TABLET,j=t!==n.z,d=Object(s.useState)("favorites"),b=Object(r.a)(d,2),h=b[0],O=b[1],x=Object(s.useState)("groups-list"),v=Object(r.a)(x,2),y=v[0],S=v[1],w=Object(s.useState)(""),m=Object(r.a)(w,2),k=m[0],C=m[1],_=Object(s.useState)(!1),E=Object(r.a)(_,2),L=E[0],F=E[1],P=Object(g.a)(),I=P.favoriteGroups,J=P.toggleGroupsFavoriteFlag,T=P.toggleFlagErrorSnackbar,V=P.offSnackbar;Object(s.useEffect)((function(){history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1},"")}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",N),function(){window.removeEventListener("popstate",N)}}),[]);var G=function(e){V(),history.pushState({activeStory:e.currentTarget.dataset.story,searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1},""),O(e.currentTarget.dataset.story)},N=function(){history.state&&(V(),F(history.state.groups_contextOpened),O(history.state.activeStory),S(history.state.groups_activePanel))},A=function(){if(L)document.body.style.overflow="visible",history.back();else{document.body.style.overflow="hidden";var e=history.state;e.groups_contextOpened=!0,history.pushState(e,""),F(!0)}};return Object(f.jsxs)(n.w,{header:j&&Object(f.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(f.jsx)(n.v,{fixed:!0,width:280,maxWidth:280,children:Object(f.jsxs)(n.k,{children:[j&&Object(f.jsx)(n.l,{}),Object(f.jsxs)(n.h,{children:[Object(f.jsx)(n.c,{disabled:"favorites"===h,style:"favorites"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:G,before:Object(f.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(n.c,{disabled:"groups"===h,style:"groups"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:G,before:Object(f.jsx)(o.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(n.c,{disabled:"teachers"===h,style:"teachers"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:G,before:Object(f.jsx)(i.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(f.jsx)(n.v,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(f.jsxs)(n.e,{activeStory:h,tabbar:!c&&Object(f.jsxs)(n.x,{children:[Object(f.jsx)(n.y,{onClick:G,selected:"favorites"===h,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(f.jsx)(a.a,{})}),Object(f.jsx)(n.y,{onClick:G,selected:"groups"===h,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(f.jsx)(o.a,{})}),Object(f.jsx)(n.y,{onClick:G,selected:"teachers"===h,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(f.jsx)(i.a,{})})]}),children:[Object(f.jsx)(n.A,{id:"favorites",activePanel:"favorites-list",children:Object(f.jsxs)(n.k,{id:"favorites-list",children:[Object(f.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(n.h,{style:{height:"1000px"},children:Object(f.jsx)(n.q,{icon:Object(f.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(f.jsxs)(n.A,{id:"groups",activePanel:y,children:[Object(f.jsxs)(n.k,{id:"groups-list",children:[Object(f.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(p,{onGroupSelect:function(e){history.pushState({activeStory:"groups",searchValue:"",isSearch:!1,groups_activePanel:"group-schedule",groups_contextOpened:!1},""),V(),C(e),S("group-schedule"),window.scrollTo(window.scrollX,0)}})]}),Object(f.jsxs)(n.k,{id:"group-schedule",children:[Object(f.jsx)(n.l,{left:Object(f.jsx)(n.m,{onClick:function(){return history.state.groups_contextOpened?history.go(-2):history.back()}}),children:Object(f.jsx)(n.n,{aside:Object(f.jsx)(l.a,{style:{transform:"rotate(".concat(L?"180deg":"0",")")}}),onClick:function(){return A()},children:k})}),Object(f.jsx)(n.o,{opened:L,onClose:function(){return A()},children:Object(f.jsx)(n.j,{children:Object(f.jsxs)(n.c,{before:Object(f.jsxs)(f.Fragment,{children:[I.includes(k)&&Object(f.jsx)(u.a,{fill:"var(--accent)"}),!I.includes(k)&&Object(f.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return function(e){A(),J(e)}(k)},children:[I.includes(k)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!I.includes(k)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(f.jsxs)(n.h,{style:{height:"1000px"},children:[Object(f.jsxs)(n.q,{icon:Object(f.jsx)(i.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",k]}),T]})]})]}),Object(f.jsx)(n.A,{id:"teachers",activePanel:"teachers-list",children:Object(f.jsxs)(n.k,{id:"teachers-list",children:[Object(f.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(f.jsx)(n.h,{style:{height:"1000px"},children:Object(f.jsx)(n.q,{icon:Object(f.jsx)(i.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.8d666608.chunk.js.map