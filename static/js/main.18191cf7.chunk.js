(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{144:function(e,t,r){},164:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),c=r(16),a=r.n(c),o=r(9),i=r.n(o),u=r(8),l=(r(143),r(144),r(43)),b=r(44),j=r(46),O=r(45),h=r(165),d=r(5),f=function(e){Object(j.a)(r,e);var t=Object(O.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={hasError:!1},n}return Object(b.a)(r,[{key:"render",value:function(){return this.state.hasError?Object(d.jsx)(u.C,{children:Object(d.jsx)(u.l,{children:Object(d.jsxs)(u.r,{stretched:!0,icon:Object(d.jsx)(h.a,{fill:"var(--dynamic_red)"}),children:["\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443 ",Object(d.jsx)("br",{})," \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441 \u043e\u0447\u0438\u0441\u0442\u043a\u043e\u0439 \u043a\u044d\u0448\u0430"]})})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log(e),{hasError:!0}}}]),r}(s.a.Component),g=r(166),p=function(){var e=Object(u.E)().viewWidth;return Object(d.jsx)(u.e,{children:Object(d.jsx)(u.a,{children:Object(d.jsx)(u.b,{children:Object(d.jsx)(u.y,{header:Object(d.jsx)(u.m,{separator:!1}),children:Object(d.jsx)(u.x,{spaced:e&&e>u.D.MOBILE,children:Object(d.jsxs)(u.r,{Placeholder:!0,stretched:!0,icon:Object(d.jsx)(g.a,{fill:"var(--dynamic_red)"}),children:["\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u043c\u0438 Cookie ",Object(d.jsx)("br",{})," \u0438\u043b\u0438 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0438\u043d\u043a\u043e\u0433\u043d\u0438\u0442\u043e"]})})})})})})},v=r(26),S=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,172))})),x=function(){var e=Object(u.F)();return Object(d.jsx)(v.b,{children:Object(d.jsx)(u.e,{platform:e===u.B?"android":e,children:Object(d.jsx)(u.a,{children:Object(d.jsx)(u.b,{children:Object(d.jsx)(f,{children:Object(d.jsx)(n.Suspense,{fallback:Object(d.jsx)(u.t,{}),children:Object(d.jsx)(S,{})})})})})})})};try{localStorage.setItem("test","test"),sessionStorage.setItem("groupsFavorite",JSON.stringify([])),sessionStorage.setItem("teachersFavorite",JSON.stringify([])),i.a.send("VKWebAppStorageGet",{keys:["groupsFavorite","teachersFavorite"]}).then((function(e){console.log(e),e.keys[0].value&&sessionStorage.setItem("groupsFavorite",e.keys[0].value),e.keys[1].value&&sessionStorage.setItem("teachersFavorite",e.keys[1].value),i.a.send("VKWebAppInit"),i.a.subscribe((function(e){"VKWebAppUpdateConfig"===e.detail.type&&document.body.setAttribute("scheme",e.detail.data.scheme)})),history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,favorites_activePanel:"favorites-list",body_overflow:"visible"},""),a.a.render(Object(d.jsx)(x,{}),document.getElementById("root"))}))}catch(y){a.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}Promise.all([r.e(3),r.e(5)]).then(r.bind(null,171)).then((function(e){e.default}))},26:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return f}));var n=r(24),s=r(12),c=r(0),a=r(9),o=r.n(a),i=r(167),u=r(8),l=r(5),b=function(e){var t=e.message,r=e.setSnackbar;return Object(l.jsx)(u.w,{onClose:function(){r(null)},before:Object(l.jsx)(i.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:t})},j=r(25),O=r.n(j),h=Object(c.createContext)(),d=function(){return Object(c.useContext)(h)},f=function(e){var t=e.children,r=Object(c.useState)(JSON.parse(sessionStorage.getItem("groupsFavorite"))),a=Object(s.a)(r,2),i=a[0],u=a[1],j=Object(c.useState)(JSON.parse(sessionStorage.getItem("teachersFavorite"))),d=Object(s.a)(j,2),f=d[0],g=d[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),S=v[0],x=v[1],y=Object(c.useState)(null),m=Object(s.a)(y,2),k=m[0],F=m[1],I=function(e,t){var r=Object(c.useState)((function(){var r=localStorage.getItem(t);return r?JSON.parse(r):e})),n=Object(s.a)(r,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){localStorage.setItem(t,JSON.stringify(a))}),a),[a,o]}(null,"groups"),E=Object(s.a)(I,2),J=E[0],C=E[1],G=Object(c.useState)(new AbortController),N=Object(s.a)(G,1)[0],w=Object(c.useState)(!1),A=Object(s.a)(w,2),V=A[0],W=A[1],K=Object(c.useState)(!1),_=Object(s.a)(K,2),B=_[0],P=_[1];Object(c.useEffect)((function(){J||O.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:N.signal}).then((function(e){C(e.data)})).catch((function(){W(!0)}))}),[]);Object(c.useEffect)((function(){return function(){N.abort(),fetchingGroupController.abort()}}),[]);return Object(l.jsx)(h.Provider,{value:{favoriteGroups:i,favoriteTeachers:f,groups:J,errorLoadingGroupList:V,fetchingGroups:B,toggleGroupsFavoriteFlag:function(e){var t=Object(n.a)(i),r="";t.includes(e)?(t.splice(t.indexOf(e),1),r='\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"'):(t.push(e),r='\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"'),o.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)}).then((function(){u(t)})).catch((function(){F(Object(l.jsx)(b,{message:r,setSnackbar:F}))}))},toggleTeachersFavoriteFlag:function(e){var t=Object(n.a)(f);t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),o.a.send("VKWebAppStorageSet",{key:"teachersFavorite",value:JSON.stringify(t)}).then((function(){g(t)}))},onGroupRefresh:function(){P(!0),O.a.get("https://iis.bsuir.by/api/v1/student-groups").then((function(e){C(e.data),W(!1),P(!1)})).catch((function(){P(!1),x(Object(l.jsx)(b,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f",setSnackbar:x}))}))},toggleGroupFavoriteFlagSnackbar:k,refreshErrorSnackbar:S,closeSnackbars:function(){x(null),F(null)}},children:t})}}},[[164,1,2]]]);
//# sourceMappingURL=main.18191cf7.chunk.js.map