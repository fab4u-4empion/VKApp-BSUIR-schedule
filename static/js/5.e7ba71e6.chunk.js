(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{176:function(e,t,s){"use strict";s.r(t);var c=s(147),r=s(0),n=s(11),i=s(172),a=s(173),o=s(174),j=s(170),d=s(171),l=s(148),b=s.n(l),u=s(12),O=s.n(u),h=s(9);var f=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),s=t[0],a=t[1],o=Object(r.useState)(!1),l=Object(c.a)(o,2),u=l[0],f=l[1],x=Object(r.useState)(!1),g=Object(c.a)(x,2),p=g[0],v=g[1],S=Object(r.useState)([]),y=Object(c.a)(S,2),w=y[0],m=y[1],k=Object(r.useState)([]),C=Object(c.a)(k,2),E=C[0],J=C[1],L=Object(r.useState)(1),I=Object(c.a)(L,2),N=I[0],T=I[1],_=Object(r.useState)(!1),F=Object(c.a)(_,2),W=F[0],P=F[1],R=Object(r.useState)([]),q=Object(c.a)(R,2),A=q[0],H=q[1],B=Object(r.useState)([]),K=Object(c.a)(B,2),V=K[0],X=K[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=s.toLowerCase();J(w.filter((function(t){return t.name.toLowerCase().indexOf(e)>-1})))}),[s]),Object(r.useEffect)((function(){W&&(H([].concat(Object(j.a)(A),Object(j.a)(E.slice(30*N,30*N+30)))),T((function(e){return e+1})),P(!1))}),[W]),Object(r.useEffect)((function(){T(1),H(E.slice(0,30))}),[E]),Object(r.useEffect)((function(){sessionStorage.getItem("groups")?(m(JSON.parse(sessionStorage.getItem("groups"))),f((function(){var e=s.toLowerCase();return J(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))),!0}))):b.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){sessionStorage.setItem("groups",JSON.stringify(e.data)),m(e.data),f((function(){var e=s.toLowerCase();return J(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))),!0}))})).catch((function(){v(!0)}))}),[]),Object(r.useEffect)((function(){sessionStorage.getItem("groupsFavorite")&&X(JSON.parse(sessionStorage.getItem("groupsFavorite")))}),[]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(V))}),[V]),Object(r.useEffect)((function(){return window.addEventListener("scroll",z),function(){window.removeEventListener("scroll",z)}}),[]);var z=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&P(!0)};return Object(h.jsxs)("span",{children:[Object(h.jsx)(n.f,{vertical:"top",filled:"true",children:Object(h.jsx)(n.p,{readOnly:!u,value:s,onChange:function(e){a(e.target.value)},after:null})}),Object(h.jsxs)(n.h,{style:{paddingTop:40},children:[Object(h.jsx)(n.j,{children:u&&E.length>0&&A.map((function(e){return Object(h.jsx)(n.c,{after:Object(h.jsxs)(n.i,{onClick:function(){!function(e){var t=Object(j.a)(V);V.includes(e)?(t.splice(V.indexOf(e),1),X(t)):(t.push(e),X(t)),O.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[V.includes(e.id)&&Object(h.jsx)(d.a,{}),!V.includes(e.id)&&Object(h.jsx)(i.a,{})]}),children:e.name},e.id)}))}),!u&&!p&&Object(h.jsx)(n.m,{}),u&&0===E.length&&Object(h.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),p&&Object(h.jsx)(n.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})]})]})};t.default=function(){var e=Object(n.x)().viewWidth,t=Object(n.y)(),s=e>=n.w.TABLET,j=t!==n.u,d=Object(r.useState)("favorites"),l=Object(c.a)(d,2),b=l[0],u=l[1],O=function(e){return u(e.currentTarget.dataset.story)};return Object(h.jsxs)(n.r,{header:j&&Object(h.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[s&&Object(h.jsx)(n.q,{fixed:!0,width:280,maxWidth:280,children:Object(h.jsxs)(n.k,{children:[j&&Object(h.jsx)(n.l,{}),Object(h.jsxs)(n.h,{children:[Object(h.jsx)(n.c,{disabled:"favorites"===b,style:"favorites"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:O,before:Object(h.jsx)(i.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.c,{disabled:"groups"===b,style:"groups"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:O,before:Object(h.jsx)(a.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(n.c,{disabled:"teachers"===b,style:"teachers"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:O,before:Object(h.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(h.jsx)(n.q,{animate:!s,spaced:s,width:s?"560px":"100%",maxWidth:s?"560px":"100%",children:Object(h.jsxs)(n.e,{activeStory:b,tabbar:!s&&Object(h.jsxs)(n.s,{children:[Object(h.jsx)(n.t,{onClick:O,selected:"favorites"===b,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(h.jsx)(i.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"groups"===b,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(h.jsx)(a.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"teachers"===b,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(h.jsx)(o.a,{})})]}),children:[Object(h.jsx)(n.v,{id:"favorites",activePanel:"favorites-list",children:Object(h.jsxs)(n.k,{id:"favorites-list",children:[Object(h.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(i.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(h.jsx)(n.v,{id:"groups",activePanel:"groups-list",children:Object(h.jsxs)(n.k,{id:"groups-list",children:[Object(h.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(f,{})]})}),Object(h.jsx)(n.v,{id:"teachers",activePanel:"teachers-list",children:Object(h.jsxs)(n.k,{id:"teachers-list",children:[Object(h.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.e7ba71e6.chunk.js.map