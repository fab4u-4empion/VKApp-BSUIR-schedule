(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{176:function(e,t,s){"use strict";s.r(t);var c=s(147),r=s(0),n=s(11),i=s(172),a=s(173),o=s(174),j=s(170),d=s(171),u=s(148),l=s.n(u),b=s(12),O=s.n(b),h=s(8);var f=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),s=t[0],a=t[1],o=Object(r.useState)(!!sessionStorage.getItem("groups")),u=Object(c.a)(o,2),b=u[0],f=u[1],g=Object(r.useState)(!1),x=Object(c.a)(g,2),p=x[0],v=x[1],y=Object(r.useState)(sessionStorage.getItem("groups")?JSON.parse(sessionStorage.getItem("groups")):[]),S=Object(c.a)(y,2),w=S[0],m=S[1],k=Object(r.useState)(sessionStorage.getItem("groups")?JSON.parse(sessionStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1})):[]),C=Object(c.a)(k,2),E=C[0],L=C[1],I=Object(r.useState)(1),J=Object(c.a)(I,2),N=J[0],T=J[1],_=Object(r.useState)(!1),F=Object(c.a)(_,2),W=F[0],P=F[1],R=Object(r.useState)([]),q=Object(c.a)(R,2),A=q[0],H=q[1],B=Object(r.useState)(sessionStorage.getItem("groupsFavorite")?JSON.parse(sessionStorage.getItem("groupsFavorite")):[]),K=Object(c.a)(B,2),V=K[0],X=K[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0),L(w.filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1})))}),[s]),Object(r.useEffect)((function(){W&&(H([].concat(Object(j.a)(A),Object(j.a)(E.slice(30*N,30*N+30)))),T((function(e){return e+1})),P(!1))}),[W]),Object(r.useEffect)((function(){T(1),H(E.slice(0,30))}),[E]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(V))}),[V]),Object(r.useEffect)((function(){b||l.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){sessionStorage.setItem("groups",JSON.stringify(e.data)),m(e.data),f((function(){return L(JSON.parse(sessionStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1}))),!0}))})).catch((function(){v(!0)}))}),[]),Object(r.useEffect)((function(){return window.addEventListener("scroll",z),function(){window.removeEventListener("scroll",z)}}),[]);var z=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&P(!0)};return Object(h.jsxs)("span",{children:[Object(h.jsx)(n.f,{vertical:"top",filled:"true",children:Object(h.jsx)(n.p,{readOnly:!b,value:s,onChange:function(e){return a(e.target.value)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(h.jsxs)(n.h,{style:{paddingTop:40},children:[Object(h.jsx)(n.j,{children:b&&E.length>0&&A.map((function(e){return Object(h.jsx)(n.c,{after:Object(h.jsxs)(n.i,{onClick:function(){!function(e){var t=Object(j.a)(V);V.includes(e)?(t.splice(V.indexOf(e),1),X(t)):(t.push(e),X(t)),O.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[V.includes(e.id)&&Object(h.jsx)(d.a,{}),!V.includes(e.id)&&Object(h.jsx)(i.a,{})]}),children:e.name},e.id)}))}),!b&&!p&&Object(h.jsx)(n.m,{}),b&&0===E.length&&Object(h.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),p&&Object(h.jsx)(n.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})]})]})};t.default=function(){var e=Object(n.x)().viewWidth,t=Object(n.y)(),s=e>=n.w.TABLET,j=t!==n.u,d=Object(r.useState)("favorites"),u=Object(c.a)(d,2),l=u[0],b=u[1];Object(r.useEffect)((function(){history.pushState({title:"navigation",activeStory:"favorites"},"")}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",g),function(){window.removeEventListener("popstate",g)}}),[]);var O=function(e){history.pushState({title:"navigation",activeStory:e.currentTarget.dataset.story},""),b(e.currentTarget.dataset.story)},g=function(){history.state&&"navigation"===history.state.title&&b(history.state.activeStory)};return Object(h.jsxs)(n.r,{header:j&&Object(h.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[s&&Object(h.jsx)(n.q,{fixed:!0,width:280,maxWidth:280,children:Object(h.jsxs)(n.k,{children:[j&&Object(h.jsx)(n.l,{}),Object(h.jsxs)(n.h,{children:[Object(h.jsx)(n.c,{disabled:"favorites"===l,style:"favorites"===l?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:O,before:Object(h.jsx)(i.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.c,{disabled:"groups"===l,style:"groups"===l?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:O,before:Object(h.jsx)(a.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(n.c,{disabled:"teachers"===l,style:"teachers"===l?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:O,before:Object(h.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(h.jsx)(n.q,{animate:!s,spaced:s,width:s?"560px":"100%",maxWidth:s?"560px":"100%",children:Object(h.jsxs)(n.e,{activeStory:l,tabbar:!s&&Object(h.jsxs)(n.s,{children:[Object(h.jsx)(n.t,{onClick:O,selected:"favorites"===l,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(h.jsx)(i.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"groups"===l,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(h.jsx)(a.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"teachers"===l,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(h.jsx)(o.a,{})})]}),children:[Object(h.jsx)(n.v,{id:"favorites",activePanel:"favorites-list",children:Object(h.jsxs)(n.k,{id:"favorites-list",children:[Object(h.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(i.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(h.jsx)(n.v,{id:"groups",activePanel:"groups-list",children:Object(h.jsxs)(n.k,{id:"groups-list",children:[Object(h.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(f,{})]})}),Object(h.jsx)(n.v,{id:"teachers",activePanel:"teachers-list",children:Object(h.jsxs)(n.k,{id:"teachers-list",children:[Object(h.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.ae253347.chunk.js.map