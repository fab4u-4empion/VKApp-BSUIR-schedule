(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{176:function(e,t,s){"use strict";s.r(t);var c=s(147),r=s(0),a=s(11),i=s(172),n=s(173),o=s(174),j=s(170),u=s(171),l=s(148),d=s.n(l),b=s(12),h=s.n(b),O=s(8);var f=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),s=t[0],n=t[1],o=Object(r.useState)(!0),l=Object(c.a)(o,2),b=l[0],f=l[1],g=Object(r.useState)(!!sessionStorage.getItem("groups")),x=Object(c.a)(g,2),p=x[0],v=x[1],y=Object(r.useState)(!1),S=Object(c.a)(y,2),w=S[0],m=S[1],k=Object(r.useState)(sessionStorage.getItem("groups")?JSON.parse(sessionStorage.getItem("groups")):[]),E=Object(c.a)(k,2),C=E[0],L=E[1],I=Object(r.useState)([]),J=Object(c.a)(I,2),N=J[0],T=J[1],V=Object(r.useState)(1),_=Object(c.a)(V,2),F=_[0],W=_[1],P=Object(r.useState)(!1),R=Object(c.a)(P,2),q=R[0],A=R[1],H=Object(r.useState)([]),B=Object(c.a)(H,2),K=B[0],X=B[1],z=Object(r.useState)([]),D=Object(c.a)(z,2),G=D[0],M=D[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=s.toLowerCase();T(C.filter((function(t){return t.name.toLowerCase().indexOf(e)>-1})))}),[s]),Object(r.useEffect)((function(){q&&(X([].concat(Object(j.a)(K),Object(j.a)(N.slice(30*F,30*F+30)))),W((function(e){return e+1})),A(!1))}),[q]),Object(r.useEffect)((function(){W(1),X(N.slice(0,30))}),[N]),Object(r.useEffect)((function(){if(p){var e=s.toLowerCase();T(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1})))}else d.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){sessionStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),v((function(){var e=s.toLowerCase();return T(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))),!0}))})).catch((function(){m(!0)}))}),[]),Object(r.useEffect)((function(){sessionStorage.getItem("groupsFavorite")&&M(JSON.parse(sessionStorage.getItem("groupsFavorite")))}),[]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(G))}),[G]),Object(r.useEffect)((function(){return window.addEventListener("scroll",Q),function(){window.removeEventListener("scroll",Q)}}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",U),function(){window.removeEventListener("popstate",U)}}),[]),Object(r.useEffect)((function(){history.state&&"search"===history.state.title&&n(history.state.searchValue)}),[]);var Q=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&A(!0)},U=function(){history.state&&"search"===history.state.title&&n(history.state.searchValue)};return Object(O.jsxs)("span",{children:[Object(O.jsx)(a.f,{vertical:"top",filled:"true",children:Object(O.jsx)(a.p,{readOnly:!p,value:s,onChange:function(e){return t=e.target.value,b?(history.pushState({title:"search",searchValue:""},""),history.pushState({title:"search",searchValue:t},""),f(!1)):history.replaceState({title:"search",searchValue:t},""),void n(t);var t},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(O.jsxs)(a.h,{style:{paddingTop:40},children:[Object(O.jsx)(a.j,{children:p&&N.length>0&&K.map((function(e){return Object(O.jsx)(a.c,{after:Object(O.jsxs)(a.i,{onClick:function(){!function(e){var t=Object(j.a)(G);G.includes(e)?(t.splice(G.indexOf(e),1),M(t)):(t.push(e),M(t)),h.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[G.includes(e.id)&&Object(O.jsx)(u.a,{}),!G.includes(e.id)&&Object(O.jsx)(i.a,{})]}),children:e.name},e.id)}))}),!p&&!w&&Object(O.jsx)(a.m,{}),p&&0===N.length&&Object(O.jsx)(a.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),w&&Object(O.jsx)(a.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})]})]})};t.default=function(){var e=Object(a.x)().viewWidth,t=Object(a.y)(),s=e>=a.w.TABLET,j=t!==a.u,u=Object(r.useState)("favorites"),l=Object(c.a)(u,2),d=l[0],b=l[1];Object(r.useEffect)((function(){history.pushState({title:"navigation",activeStory:"favorites"},"")}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",g),function(){window.removeEventListener("popstate",g)}}),[]);var h=function(e){history.pushState({title:"navigation",activeStory:e.currentTarget.dataset.story},""),b(e.currentTarget.dataset.story)},g=function(){console.log(history.state),history.state&&"navigation"===history.state.title&&b(history.state.activeStory),history.state&&"search"===history.state.title&&b("groups")};return Object(O.jsxs)(a.r,{header:j&&Object(O.jsx)(a.l,{separator:!1}),style:{justifyContent:"center"},children:[s&&Object(O.jsx)(a.q,{fixed:!0,width:280,maxWidth:280,children:Object(O.jsxs)(a.k,{children:[j&&Object(O.jsx)(a.l,{}),Object(O.jsxs)(a.h,{children:[Object(O.jsx)(a.c,{disabled:"favorites"===d,style:"favorites"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:h,before:Object(O.jsx)(i.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(a.c,{disabled:"groups"===d,style:"groups"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:h,before:Object(O.jsx)(n.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(a.c,{disabled:"teachers"===d,style:"teachers"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:h,before:Object(O.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(O.jsx)(a.q,{animate:!s,spaced:s,width:s?"560px":"100%",maxWidth:s?"560px":"100%",children:Object(O.jsxs)(a.e,{activeStory:d,tabbar:!s&&Object(O.jsxs)(a.s,{children:[Object(O.jsx)(a.t,{onClick:h,selected:"favorites"===d,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(O.jsx)(i.a,{})}),Object(O.jsx)(a.t,{onClick:h,selected:"groups"===d,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(O.jsx)(n.a,{})}),Object(O.jsx)(a.t,{onClick:h,selected:"teachers"===d,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(O.jsx)(o.a,{})})]}),children:[Object(O.jsx)(a.v,{id:"favorites",activePanel:"favorites-list",children:Object(O.jsxs)(a.k,{id:"favorites-list",children:[Object(O.jsx)(a.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(a.h,{style:{height:"1000px"},children:Object(O.jsx)(a.n,{icon:Object(O.jsx)(i.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(O.jsx)(a.v,{id:"groups",activePanel:"groups-list",children:Object(O.jsxs)(a.k,{id:"groups-list",children:[Object(O.jsx)(a.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(f,{})]})}),Object(O.jsx)(a.v,{id:"teachers",activePanel:"teachers-list",children:Object(O.jsxs)(a.k,{id:"teachers-list",children:[Object(O.jsx)(a.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(O.jsx)(a.h,{style:{height:"1000px"},children:Object(O.jsx)(a.n,{icon:Object(O.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.bd6dca45.chunk.js.map