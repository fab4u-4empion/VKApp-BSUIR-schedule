(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{174:function(e,t,c){"use strict";c.r(t);var r=c(144),s=c(0),n=c(11),a=c(170),i=c(171),o=c(172),l=c(167),j=c(168),u=c(169),d=c(145),b=c.n(d),h=c(13),O=c.n(h),f=c(9);var g=function(){var e=Object(s.useState)(history.state.searchValue),t=Object(r.a)(e,2),c=t[0],i=t[1],o=Object(s.useState)(null),d=Object(r.a)(o,2),h=d[0],g=d[1],x=Object(s.useState)(!!localStorage.getItem("groups")),p=Object(r.a)(x,2),v=p[0],y=p[1],S=Object(s.useState)(!1),m=Object(r.a)(S,2),w=m[0],C=m[1],k=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),E=Object(r.a)(k,2),L=E[0],I=E[1],J=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1})):[]),N=Object(r.a)(J,2),_=N[0],F=N[1],T=Object(s.useState)(1),R=Object(r.a)(T,2),V=R[0],H=R[1],W=Object(s.useState)(!1),A=Object(r.a)(W,2),P=A[0],q=A[1],z=Object(s.useState)(!1),B=Object(r.a)(z,2),K=B[0],X=B[1],D=Object(s.useState)([]),G=Object(r.a)(D,2),M=G[0],Q=G[1],U=Object(s.useState)(sessionStorage.getItem("groupsFavorite")?JSON.parse(sessionStorage.getItem("groupsFavorite")):[]),Y=Object(r.a)(U,2),Z=Y[0],$=Y[1];Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=c,history.replaceState(e,""),F(L.filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1})))}),[c]),Object(s.useEffect)((function(){P&&(Q([].concat(Object(l.a)(M),Object(l.a)(_.slice(30*V,30*V+30)))),H((function(e){return e+1})),q(!1))}),[P]),Object(s.useEffect)((function(){H(1),Q(_.slice(0,30))}),[_]),Object(s.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(Z))}),[Z]),Object(s.useEffect)((function(){v||b.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),I(e.data),y((function(){return F(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1}))),!0}))})).catch((function(){C(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",ee),function(){window.removeEventListener("scroll",ee)}}),[]);var ee=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&q(!0)},te=function(){X(!0),b.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),I(e.data),X((function(){return F(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1}))),!1})),w&&(y(!0),C(!1))})).catch((function(){X(!1),g(ce)}))},ce=Object(f.jsx)(n.r,{onClose:function(){return g(null)},before:Object(f.jsx)(j.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(n.f,{vertical:"top",filled:"true",children:Object(f.jsx)(n.q,{readOnly:!v||K,value:c,onChange:function(e){return K?c:i(e.target.value)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(f.jsxs)(n.h,{style:{paddingTop:40},children:[!v&&!w&&Object(f.jsx)(n.m,{}),w&&Object(f.jsx)(n.o,{onRefresh:te,isFetching:K,style:{minHeight:"350px"},children:Object(f.jsx)(n.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),v&&!w&&Object(f.jsxs)(n.o,{onRefresh:te,isFetching:K,style:{minHeight:"350px"},children:[Object(f.jsx)(n.j,{children:v&&_.length>0&&M.map((function(e){return Object(f.jsx)(n.c,{after:Object(f.jsxs)(n.i,{onClick:function(){!function(e){var t=Object(l.a)(Z),c=null;Z.includes(e)?(t.splice(Z.indexOf(e),1),c=Object(f.jsx)(n.r,{onClose:function(){return g(null)},before:Object(f.jsx)(j.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"'})):(t.push(e),c=Object(f.jsx)(n.r,{onClose:function(){return g(null)},before:Object(f.jsx)(j.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"'})),O.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)}).then((function(){$(t)})).catch((function(){g(c)}))}(e.id)},children:[Z.includes(e.id)&&Object(f.jsx)(u.a,{}),!Z.includes(e.id)&&Object(f.jsx)(a.a,{})]}),children:e.name},e.id)}))}),0===_.length&&Object(f.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),h]})]})};t.default=function(){var e=Object(n.z)().viewWidth,t=Object(n.A)(),c=e>=n.y.TABLET,l=t!==n.w,j=Object(s.useState)("favorites"),u=Object(r.a)(j,2),d=u[0],b=u[1];Object(s.useEffect)((function(){history.pushState({title:"navigation",activeStory:"favorites",searchValue:""},"")}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",O),function(){window.removeEventListener("popstate",O)}}),[]);var h=function(e){history.pushState({title:"navigation",activeStory:e.currentTarget.dataset.story,searchValue:""},""),b(e.currentTarget.dataset.story)},O=function(){history.state&&"navigation"===history.state.title&&b(history.state.activeStory)};return Object(f.jsxs)(n.t,{header:l&&Object(f.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(f.jsx)(n.s,{fixed:!0,width:280,maxWidth:280,children:Object(f.jsxs)(n.k,{children:[l&&Object(f.jsx)(n.l,{}),Object(f.jsxs)(n.h,{children:[Object(f.jsx)(n.c,{disabled:"favorites"===d,style:"favorites"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:h,before:Object(f.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(n.c,{disabled:"groups"===d,style:"groups"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:h,before:Object(f.jsx)(i.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(n.c,{disabled:"teachers"===d,style:"teachers"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:h,before:Object(f.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(f.jsx)(n.s,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(f.jsxs)(n.e,{activeStory:d,tabbar:!c&&Object(f.jsxs)(n.u,{children:[Object(f.jsx)(n.v,{onClick:h,selected:"favorites"===d,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(f.jsx)(a.a,{})}),Object(f.jsx)(n.v,{onClick:h,selected:"groups"===d,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(f.jsx)(i.a,{})}),Object(f.jsx)(n.v,{onClick:h,selected:"teachers"===d,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(f.jsx)(o.a,{})})]}),children:[Object(f.jsx)(n.x,{id:"favorites",activePanel:"favorites-list",children:Object(f.jsxs)(n.k,{id:"favorites-list",children:[Object(f.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(n.h,{style:{height:"1000px"},children:Object(f.jsx)(n.n,{icon:Object(f.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(f.jsx)(n.x,{id:"groups",activePanel:"groups-list",children:Object(f.jsxs)(n.k,{id:"groups-list",children:[Object(f.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(g,{})]})}),Object(f.jsx)(n.x,{id:"teachers",activePanel:"teachers-list",children:Object(f.jsxs)(n.k,{id:"teachers-list",children:[Object(f.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(f.jsx)(n.h,{style:{height:"1000px"},children:Object(f.jsx)(n.n,{icon:Object(f.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.95dfd914.chunk.js.map