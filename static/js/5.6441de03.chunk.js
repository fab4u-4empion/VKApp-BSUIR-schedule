(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{176:function(e,t,s){"use strict";s.r(t);var c=s(147),r=s(0),a=s(11),n=s(172),i=s(173),o=s(174),j=s(170),d=s(171),l=s(148),u=s.n(l),b=s(12),O=s.n(b),h=s(8);var f=function(){var e=Object(r.useState)(history.state.searchValue),t=Object(c.a)(e,2),s=t[0],i=t[1],o=Object(r.useState)(!!sessionStorage.getItem("groups")),l=Object(c.a)(o,2),b=l[0],f=l[1],g=Object(r.useState)(!1),x=Object(c.a)(g,2),p=x[0],v=x[1],y=Object(r.useState)(sessionStorage.getItem("groups")?JSON.parse(sessionStorage.getItem("groups")):[]),S=Object(c.a)(y,2),w=S[0],m=S[1],k=Object(r.useState)(sessionStorage.getItem("groups")?JSON.parse(sessionStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1})):[]),C=Object(c.a)(k,2),E=C[0],L=C[1],I=Object(r.useState)(1),J=Object(c.a)(I,2),N=J[0],T=J[1],_=Object(r.useState)(!1),V=Object(c.a)(_,2),F=V[0],W=V[1],P=Object(r.useState)([]),R=Object(c.a)(P,2),q=R[0],A=R[1],H=Object(r.useState)(sessionStorage.getItem("groupsFavorite")?JSON.parse(sessionStorage.getItem("groupsFavorite")):[]),B=Object(c.a)(H,2),K=B[0],X=B[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=s,history.replaceState(e,""),L(w.filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1})))}),[s]),Object(r.useEffect)((function(){F&&(A([].concat(Object(j.a)(q),Object(j.a)(E.slice(30*N,30*N+30)))),T((function(e){return e+1})),W(!1))}),[F]),Object(r.useEffect)((function(){T(1),A(E.slice(0,30))}),[E]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(K))}),[K]),Object(r.useEffect)((function(){b||u.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){sessionStorage.setItem("groups",JSON.stringify(e.data)),m(e.data),f((function(){return L(JSON.parse(sessionStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(s.toLowerCase())>-1}))),!0}))})).catch((function(){v(!0)}))}),[]),Object(r.useEffect)((function(){return window.addEventListener("scroll",z),function(){window.removeEventListener("scroll",z)}}),[]);var z=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&W(!0)};return Object(h.jsxs)("span",{children:[Object(h.jsx)(a.f,{vertical:"top",filled:"true",children:Object(h.jsx)(a.p,{readOnly:!b,value:s,onChange:function(e){return i(e.target.value)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(h.jsxs)(a.h,{style:{paddingTop:40},children:[Object(h.jsx)(a.j,{children:b&&E.length>0&&q.map((function(e){return Object(h.jsx)(a.c,{after:Object(h.jsxs)(a.i,{onClick:function(){!function(e){var t=Object(j.a)(K);K.includes(e)?(t.splice(K.indexOf(e),1),X(t)):(t.push(e),X(t)),O.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[K.includes(e.id)&&Object(h.jsx)(d.a,{}),!K.includes(e.id)&&Object(h.jsx)(n.a,{})]}),children:e.name},e.id)}))}),!b&&!p&&Object(h.jsx)(a.m,{}),b&&0===E.length&&Object(h.jsx)(a.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),p&&Object(h.jsx)(a.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})]})]})};t.default=function(){var e=Object(a.x)().viewWidth,t=Object(a.y)(),s=e>=a.w.TABLET,j=t!==a.u,d=Object(r.useState)("favorites"),l=Object(c.a)(d,2),u=l[0],b=l[1];Object(r.useEffect)((function(){history.pushState({title:"navigation",activeStory:"favorites",searchValue:""},"")}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",g),function(){window.removeEventListener("popstate",g)}}),[]);var O=function(e){history.pushState({title:"navigation",activeStory:e.currentTarget.dataset.story,searchValue:""},""),b(e.currentTarget.dataset.story)},g=function(){history.state&&"navigation"===history.state.title&&b(history.state.activeStory)};return Object(h.jsxs)(a.r,{header:j&&Object(h.jsx)(a.l,{separator:!1}),style:{justifyContent:"center"},children:[s&&Object(h.jsx)(a.q,{fixed:!0,width:280,maxWidth:280,children:Object(h.jsxs)(a.k,{children:[j&&Object(h.jsx)(a.l,{}),Object(h.jsxs)(a.h,{children:[Object(h.jsx)(a.c,{disabled:"favorites"===u,style:"favorites"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:O,before:Object(h.jsx)(n.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(a.c,{disabled:"groups"===u,style:"groups"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:O,before:Object(h.jsx)(i.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(a.c,{disabled:"teachers"===u,style:"teachers"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:O,before:Object(h.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(h.jsx)(a.q,{animate:!s,spaced:s,width:s?"560px":"100%",maxWidth:s?"560px":"100%",children:Object(h.jsxs)(a.e,{activeStory:u,tabbar:!s&&Object(h.jsxs)(a.s,{children:[Object(h.jsx)(a.t,{onClick:O,selected:"favorites"===u,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(h.jsx)(n.a,{})}),Object(h.jsx)(a.t,{onClick:O,selected:"groups"===u,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(h.jsx)(i.a,{})}),Object(h.jsx)(a.t,{onClick:O,selected:"teachers"===u,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(h.jsx)(o.a,{})})]}),children:[Object(h.jsx)(a.v,{id:"favorites",activePanel:"favorites-list",children:Object(h.jsxs)(a.k,{id:"favorites-list",children:[Object(h.jsx)(a.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(a.h,{style:{height:"1000px"},children:Object(h.jsx)(a.n,{icon:Object(h.jsx)(n.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(h.jsx)(a.v,{id:"groups",activePanel:"groups-list",children:Object(h.jsxs)(a.k,{id:"groups-list",children:[Object(h.jsx)(a.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(f,{})]})}),Object(h.jsx)(a.v,{id:"teachers",activePanel:"teachers-list",children:Object(h.jsxs)(a.k,{id:"teachers-list",children:[Object(h.jsx)(a.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(h.jsx)(a.h,{style:{height:"1000px"},children:Object(h.jsx)(a.n,{icon:Object(h.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.6441de03.chunk.js.map