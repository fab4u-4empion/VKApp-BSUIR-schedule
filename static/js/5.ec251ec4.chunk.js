(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{173:function(e,t,c){"use strict";c.r(t);var s=c(25),r=c(0),n=c(11),a=c(167),o=c(169),i=c(170),l=c(171),u=c(166),j=c(30),d=c(37),b=c(168),h=c(144),O=c.n(h),f=(c(13),c(26)),g=c(9);var p=function(e){var t=Object(r.useState)(new AbortController),c=Object(s.a)(t,1)[0],o=Object(r.useState)(history.state.searchValue),i=Object(s.a)(o,2),l=i[0],h=i[1],p=Object(r.useState)(null),x=Object(s.a)(p,2),v=x[0],y=x[1],S=Object(r.useState)(!!localStorage.getItem("groups")),w=Object(s.a)(S,2),m=w[0],C=w[1],k=Object(r.useState)(!1),_=Object(s.a)(k,2),E=_[0],L=_[1],P=Object(r.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),I=Object(s.a)(P,2),F=I[0],J=I[1],T=Object(r.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),V=Object(s.a)(T,2),G=V[0],N=V[1],A=Object(r.useState)(history.state.groups_CurrentPage),R=Object(s.a)(A,2),q=R[0],H=R[1],W=Object(r.useState)(!1),B=Object(s.a)(W,2),X=B[0],z=B[1],D=Object(r.useState)(!1),K=Object(s.a)(D,2),M=K[0],Q=K[1],U=Object(r.useState)([]),Y=Object(s.a)(U,2),Z=Y[0],$=Y[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),N(F.filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(r.useEffect)((function(){X&&G.length>30?($([].concat(Object(j.a)(Z),Object(j.a)(G.slice(30*q,30*q+30)))),H((function(e){return e+1})),z(!1)):z(!1)}),[X]),Object(r.useEffect)((function(){H(1),$(G.slice(0,30))}),[G]),Object(r.useEffect)((function(){m||O.a.get("https://journal.bsuir.by/api/v1/groups",{signal:c.signal}).then((function(e){console.log("test"),localStorage.setItem("groups",JSON.stringify(e.data)),J(e.data),C((function(){return N(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){L(!0)}))}),[]),Object(r.useEffect)((function(){return window.addEventListener("scroll",se),function(){window.removeEventListener("scroll",se)}}),[]),Object(r.useEffect)((function(){return function(){c.abort()}}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",ne),function(){window.removeEventListener("popstate",ne)}}),[]);var ee=Object(f.a)(),te=ee.favoriteGroups,ce=ee.toggleGroupsFavoriteFlag,se=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&z(!0)},re=function(){Q(!0),O.a.get("https://journal.bsuir.by/api/v1/groups",{signal:c.signal}).then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),J(e.data),Q((function(){return N(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),E&&(C(!0),L(!1))})).catch((function(){Q(!1),y(ae)}))},ne=function(){history.state&&h(history.state.searchValue)},ae=Object(g.jsx)(n.u,{onClose:function(){return y(null)},before:Object(g.jsx)(d.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(n.f,{vertical:"top",filled:"true",children:Object(g.jsx)(n.t,{readOnly:!m||M,value:l,onChange:function(e){return M?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1},""):history.pushState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1},""),h(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(g.jsxs)(n.h,{style:{paddingTop:40},children:[!m&&!E&&Object(g.jsx)(n.p,{}),E&&Object(g.jsx)(n.r,{onRefresh:re,isFetching:M,style:{minHeight:350},children:Object(g.jsx)(n.q,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),m&&!E&&Object(g.jsxs)(n.r,{onRefresh:re,isFetching:M,style:{minHeight:350},children:[Object(g.jsx)(n.j,{children:G.length>0&&Z.map((function(t){return Object(g.jsx)(n.c,{disabled:!0,before:Object(g.jsxs)(n.i,{onClick:function(){ce(t.name)},children:[te.includes(t.name)&&Object(g.jsx)(u.a,{fill:"var(--accent)"}),!te.includes(t.name)&&Object(g.jsx)(a.a,{fill:"var(--accent)"})]}),after:Object(g.jsx)(n.i,{onClick:function(){var c;c=t.name,e.onGroupSelect(c)},children:Object(g.jsx)(b.a,{fill:"var(--icon_tertiary)"})}),children:t.name},t.id)}))}),0===G.length&&Object(g.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),v]})]})};t.default=function(){var e=Object(n.C)().viewWidth,t=Object(n.D)(),c=e>=n.B.TABLET,j=t!==n.z,d=Object(r.useState)("favorites"),b=Object(s.a)(d,2),h=b[0],O=b[1],x=Object(r.useState)(null),v=Object(s.a)(x,2),y=(v[0],v[1]),S=Object(r.useState)("groups-list"),w=Object(s.a)(S,2),m=w[0],C=w[1],k=Object(r.useState)(""),_=Object(s.a)(k,2),E=_[0],L=_[1],P=Object(r.useState)(!1),I=Object(s.a)(P,2),F=I[0],J=I[1],T=Object(f.a)(),V=T.favoriteGroups,G=T.toggleGroupsFavoriteFlag;Object(r.useEffect)((function(){history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1},"")}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",A),function(){window.removeEventListener("popstate",A)}}),[]);var N=function(e){history.pushState({activeStory:e.currentTarget.dataset.story,searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1},""),O(e.currentTarget.dataset.story)},A=function(){history.state&&(y(null),J(history.state.groups_contextOpened),O(history.state.activeStory),C(history.state.groups_activePanel))},R=function(){if(F)document.body.style.overflow="visible",history.back();else{document.body.style.overflow="hidden";var e=history.state;e.groups_contextOpened=!0,history.pushState(e,""),J(!0)}};return Object(g.jsxs)(n.w,{header:j&&Object(g.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(g.jsx)(n.v,{fixed:!0,width:280,maxWidth:280,children:Object(g.jsxs)(n.k,{children:[j&&Object(g.jsx)(n.l,{}),Object(g.jsxs)(n.h,{children:[Object(g.jsx)(n.c,{disabled:"favorites"===h,style:"favorites"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:N,before:Object(g.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(g.jsx)(n.c,{disabled:"groups"===h,style:"groups"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:N,before:Object(g.jsx)(o.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(g.jsx)(n.c,{disabled:"teachers"===h,style:"teachers"===h?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:N,before:Object(g.jsx)(i.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(g.jsx)(n.v,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(g.jsxs)(n.e,{activeStory:h,tabbar:!c&&Object(g.jsxs)(n.x,{children:[Object(g.jsx)(n.y,{onClick:N,selected:"favorites"===h,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(g.jsx)(a.a,{})}),Object(g.jsx)(n.y,{onClick:N,selected:"groups"===h,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(g.jsx)(o.a,{})}),Object(g.jsx)(n.y,{onClick:N,selected:"teachers"===h,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(g.jsx)(i.a,{})})]}),children:[Object(g.jsx)(n.A,{id:"favorites",activePanel:"favorites-list",children:Object(g.jsxs)(n.k,{id:"favorites-list",children:[Object(g.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(g.jsx)(n.h,{style:{height:"1000px"},children:Object(g.jsx)(n.q,{icon:Object(g.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(g.jsxs)(n.A,{id:"groups",activePanel:m,children:[Object(g.jsxs)(n.k,{id:"groups-list",children:[Object(g.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(g.jsx)(p,{onGroupSelect:function(e){history.pushState({activeStory:"groups",searchValue:"",isSearch:!1,groups_activePanel:"group-schedule",groups_contextOpened:!1},""),L(e),C("group-schedule"),window.scrollTo(window.scrollX,0)}})]}),Object(g.jsxs)(n.k,{id:"group-schedule",children:[Object(g.jsx)(n.l,{left:Object(g.jsx)(n.m,{onClick:function(){return history.state.groups_contextOpened?history.go(-2):history.back()}}),children:Object(g.jsx)(n.n,{aside:Object(g.jsx)(l.a,{style:{transform:"rotate(".concat(F?"180deg":"0",")")}}),onClick:function(){return R()},children:E})}),Object(g.jsx)(n.o,{opened:F,onClose:function(){return R()},children:Object(g.jsx)(n.j,{children:Object(g.jsxs)(n.c,{before:Object(g.jsxs)(g.Fragment,{children:[V.includes(E)&&Object(g.jsx)(u.a,{fill:"var(--accent)"}),!V.includes(E)&&Object(g.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return function(e){G(e),R()}(E)},children:[V.includes(E)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!V.includes(E)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(g.jsx)(n.h,{style:{height:"1000px"},children:Object(g.jsxs)(n.q,{icon:Object(g.jsx)(i.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",E]})})]})]}),Object(g.jsx)(n.A,{id:"teachers",activePanel:"teachers-list",children:Object(g.jsxs)(n.k,{id:"teachers-list",children:[Object(g.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(g.jsx)(n.h,{style:{height:"1000px"},children:Object(g.jsx)(n.q,{icon:Object(g.jsx)(i.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.ec251ec4.chunk.js.map