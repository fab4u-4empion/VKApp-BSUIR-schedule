(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{179:function(e,t,c){"use strict";c.r(t);var r=c(24),s=c(0),n=c(11),a=c(173),o=c(175),i=c(176),l=c(177),u=c(172),j=c(27),b=c(37),d=c(142),f=c.n(d),h=c(26),O=c(9);var g=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],d=i[1],g=Object(s.useState)(!!localStorage.getItem("groups")),p=Object(r.a)(g,2),x=p[0],v=p[1],y=Object(s.useState)(!1),S=Object(r.a)(y,2),m=S[0],w=S[1],C=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),_=Object(r.a)(C,2),E=_[0],k=_[1],L=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),N=Object(r.a)(L,2),I=N[0],J=N[1],P=Object(s.useState)(history.state.groups_CurrentPage),F=Object(r.a)(P,2),V=F[0],T=F[1],H=Object(s.useState)(!1),R=Object(r.a)(H,2),A=R[0],G=R[1],W=Object(s.useState)(!1),X=Object(r.a)(W,2),q=X[0],B=X[1],z=Object(s.useState)([]),D=Object(r.a)(z,2),K=D[0],M=D[1],Q=Object(s.useState)(null),U=Object(r.a)(Q,2),Y=U[0],Z=U[1],$=Object(h.a)(),ee=$.favoriteGroups,te=$.toggleGroupsFavoriteFlag;Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),J(E.filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){A&&I.length>30?(M([].concat(Object(j.a)(K),Object(j.a)(I.slice(30*V,30*V+30)))),T((function(e){return e+1})),G(!1)):G(!1)}),[A]),Object(s.useEffect)((function(){T(1),M(I.slice(0,30))}),[I]),Object(s.useEffect)((function(){x||f.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){console.log("test"),localStorage.setItem("groups",JSON.stringify(e.data)),k(e.data),v((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){w(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",ce),function(){window.removeEventListener("scroll",ce)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){Z(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",se),function(){window.removeEventListener("popstate",se)}}),[]);var ce=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&G(!0)},re=function(){B(!0),f.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),k(e.data),B((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),m&&(v(!0),w(!1))})).catch((function(){B(!1),Z(ne)}))},se=function(){history.state&&d(history.state.searchValue)},ne=Object(O.jsx)(n.w,{onClose:function(){return Z(null)},before:Object(O.jsx)(b.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.g,{vertical:"top",filled:"true",children:Object(O.jsx)(n.u,{readOnly:!x||q,value:l,onChange:function(e){return q?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""),d(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(O.jsxs)(n.i,{style:{paddingTop:40},children:[!x&&!m&&Object(O.jsx)(n.q,{}),m&&Object(O.jsx)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:Object(O.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),x&&!m&&Object(O.jsxs)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:[Object(O.jsx)(n.k,{children:I.length>0&&K.map((function(t){return Object(O.jsx)(n.v,{onClick:function(){var c;c=t.name,e.onGroupSelect(c)},expandable:!0,before:Object(O.jsxs)(n.j,{onClick:function(e){return function(e,t){e.stopPropagation(),te(t),Z(null)}(e,t.name)},children:[ee.includes(t.name)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!ee.includes(t.name)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),children:t.name},t.id)}))}),0===I.length&&Object(O.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),Y]})]})},p=c(174);var x=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(!!localStorage.getItem("teachers")),h=Object(r.a)(d,2),g=h[0],x=h[1],v=Object(s.useState)(!1),y=Object(r.a)(v,2),S=y[0],m=y[1],w=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")):[]),C=Object(r.a)(w,2),_=C[0],E=C[1],k=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),L=Object(r.a)(k,2),N=L[0],I=L[1],J=Object(s.useState)(history.state.groups_CurrentPage),P=Object(r.a)(J,2),F=P[0],V=P[1],T=Object(s.useState)(!1),H=Object(r.a)(T,2),R=H[0],A=H[1],G=Object(s.useState)(!1),W=Object(r.a)(G,2),X=W[0],q=W[1],B=Object(s.useState)([]),z=Object(r.a)(B,2),D=z[0],K=z[1],M=Object(s.useState)(null),Q=Object(r.a)(M,2),U=Q[0],Y=Q[1];Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),I(_.filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){R&&N.length>30?(K([].concat(Object(j.a)(D),Object(j.a)(N.slice(30*F,30*F+30)))),V((function(e){return e+1})),A(!1)):A(!1)}),[R]),Object(s.useEffect)((function(){V(1),K(N.slice(0,30))}),[N]),Object(s.useEffect)((function(){g||f.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),x((function(){return I(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){m(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",Z),function(){window.removeEventListener("scroll",Z)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){Y(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",ee),function(){window.removeEventListener("popstate",ee)}}),[]);var Z=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&A(!0)},$=function(){q(!0),f.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),q((function(){return I(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),S&&(x(!0),m(!1))})).catch((function(){q(!1),Y(te)}))},ee=function(){history.state&&u(history.state.searchValue)},te=Object(O.jsx)(n.w,{onClose:function(){return Y(null)},before:Object(O.jsx)(b.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.g,{vertical:"top",filled:"true",children:Object(O.jsx)(n.u,{readOnly:!g||X,value:l,onChange:function(e){return X?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,groups_activePanel:"teachers-list",groups_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,groups_activePanel:"teachers-list",groups_contextOpened:!1,body_overflow:"visible"},""),u(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(O.jsxs)(n.i,{style:{paddingTop:40},children:[!g&&!S&&Object(O.jsx)(n.q,{}),S&&Object(O.jsx)(n.s,{onRefresh:$,isFetching:X,style:{minHeight:350},children:Object(O.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"})}),g&&!S&&Object(O.jsxs)(n.s,{onRefresh:$,isFetching:X,style:{minHeight:350},children:[Object(O.jsx)(n.k,{children:N.length>0&&D.map((function(e){return Object(O.jsx)(n.d,{disabled:!0,before:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.j,{onClick:function(){Y(null)},children:Object(O.jsx)(a.a,{fill:"var(--accent)"})}),Object(O.jsx)(n.c,{src:e.photoLink})]}),after:Object(O.jsx)(n.j,{onClick:function(){},children:Object(O.jsx)(p.a,{fill:"var(--icon_tertiary)"})}),description:e.rank,children:e.fullName},e.id)}))}),0===N.length&&Object(O.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),U]})]})};t.default=function(){var e=Object(n.E)().viewWidth,t=Object(n.F)(),c=e>=n.D.TABLET,j=t!==n.B,b=Object(s.useState)("favorites"),d=Object(r.a)(b,2),f=d[0],p=d[1],v=Object(s.useState)("groups-list"),y=Object(r.a)(v,2),S=y[0],m=y[1],w=Object(s.useState)(""),C=Object(r.a)(w,2),_=C[0],E=C[1],k=Object(s.useState)(!1),L=Object(r.a)(k,2),N=L[0],I=L[1],J=Object(s.useState)(null),P=Object(r.a)(J,2),F=P[0],V=P[1],T=Object(h.a)(),H=T.favoriteGroups,R=T.toggleGroupsFavoriteFlag,A=T.errorSnackbar;Object(s.useEffect)((function(){history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},"")}),[]),Object(s.useEffect)((function(){V(A)}),[A]),Object(s.useEffect)((function(){return window.addEventListener("popstate",W),function(){window.removeEventListener("popstate",W)}}),[]);var G=function(e){V(null),history.pushState({activeStory:e.currentTarget.dataset.story,searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""),m("groups-list"),p(e.currentTarget.dataset.story)},W=function(){history.state&&(I(history.state.groups_contextOpened),p(history.state.activeStory),m(history.state.groups_activePanel),document.body.style.overflow=history.state.body_overflow)},X=function(){if(N)history.back();else{var e=history.state;e.groups_contextOpened=!0,e.body_overflow="hidden",document.body.style.overflow="hidden",history.pushState(e,""),I(!0)}};return Object(O.jsxs)(n.y,{header:j&&Object(O.jsx)(n.m,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(O.jsx)(n.x,{fixed:!0,width:280,maxWidth:280,children:Object(O.jsxs)(n.l,{children:[j&&Object(O.jsx)(n.m,{}),Object(O.jsxs)(n.i,{children:[Object(O.jsx)(n.d,{disabled:"favorites"===f,style:"favorites"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:G,before:Object(O.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(n.d,{disabled:"groups"===f,style:"groups"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:G,before:Object(O.jsx)(o.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(n.d,{disabled:"teachers"===f,style:"teachers"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:G,before:Object(O.jsx)(i.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(O.jsx)(n.x,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(O.jsxs)(n.f,{activeStory:f,tabbar:!c&&Object(O.jsxs)(n.z,{children:[Object(O.jsx)(n.A,{onClick:G,selected:"favorites"===f,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(O.jsx)(a.a,{})}),Object(O.jsx)(n.A,{onClick:G,selected:"groups"===f,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(O.jsx)(o.a,{})}),Object(O.jsx)(n.A,{onClick:G,selected:"teachers"===f,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(O.jsx)(i.a,{})})]}),children:[Object(O.jsx)(n.C,{id:"favorites",activePanel:"favorites-list",children:Object(O.jsxs)(n.l,{id:"favorites-list",children:[Object(O.jsx)(n.m,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(n.i,{style:{height:"1000px"},children:Object(O.jsx)(n.r,{icon:Object(O.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(O.jsxs)(n.C,{id:"groups",activePanel:S,children:[Object(O.jsxs)(n.l,{id:"groups-list",children:[Object(O.jsx)(n.m,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(g,{onGroupSelect:function(e){history.pushState({activeStory:"groups",searchValue:"",isSearch:!1,groups_activePanel:"group-schedule",groups_contextOpened:!1,body_overflow:"visible"},""),E(e),m("group-schedule"),window.scrollTo(window.scrollX,0)}}),F]}),Object(O.jsxs)(n.l,{id:"group-schedule",children:[Object(O.jsx)(n.m,{left:Object(O.jsx)(n.n,{onClick:function(){return history.state.groups_contextOpened?history.go(-2):history.back()}}),children:Object(O.jsx)(n.o,{aside:Object(O.jsx)(l.a,{style:{transform:"rotate(".concat(N?"180deg":"0",")")}}),onClick:function(){return X()},children:_})}),Object(O.jsx)(n.p,{opened:N,onClose:function(){return X()},children:Object(O.jsx)(n.k,{children:Object(O.jsxs)(n.d,{before:Object(O.jsxs)(O.Fragment,{children:[H.includes(_)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!H.includes(_)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return function(e){X(),R(e)}(_)},children:[H.includes(_)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!H.includes(_)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(O.jsxs)(n.i,{style:{height:"1000px"},children:[Object(O.jsxs)(n.r,{icon:Object(O.jsx)(i.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",_]}),F]})]})]}),Object(O.jsx)(n.C,{id:"teachers",activePanel:"teachers-list",children:Object(O.jsxs)(n.l,{id:"teachers-list",children:[Object(O.jsx)(n.m,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(O.jsx)(x,{})]})})]})})]})}}}]);
//# sourceMappingURL=5.177ec787.chunk.js.map