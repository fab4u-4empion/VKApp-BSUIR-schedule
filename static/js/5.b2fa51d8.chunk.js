(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{179:function(e,t,c){"use strict";c.r(t);var r=c(24),s=c(0),n=c(11),a=c(173),o=c(175),i=c(176),l=c(177),u=c(172),j=c(27),b=c(37),d=c(174),f=c(142),h=c.n(f),O=c(26),g=c(9);var p=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],f=i[1],p=Object(s.useState)(!!localStorage.getItem("groups")),x=Object(r.a)(p,2),v=x[0],y=x[1],S=Object(s.useState)(!1),m=Object(r.a)(S,2),w=m[0],C=m[1],_=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),E=Object(r.a)(_,2),k=E[0],L=E[1],N=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),I=Object(r.a)(N,2),F=I[0],J=I[1],P=Object(s.useState)(history.state.groups_CurrentPage),V=Object(r.a)(P,2),T=V[0],H=V[1],R=Object(s.useState)(!1),G=Object(r.a)(R,2),A=G[0],B=G[1],z=Object(s.useState)(!1),W=Object(r.a)(z,2),X=W[0],q=W[1],D=Object(s.useState)([]),K=Object(r.a)(D,2),M=K[0],Q=K[1],U=Object(s.useState)(null),Y=Object(r.a)(U,2),Z=Y[0],$=Y[1],ee=Object(O.a)(),te=ee.favoriteGroups,ce=ee.toggleGroupsFavoriteFlag,re=ee.toggleFlagErrorSnackbar;Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),J(k.filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){A&&F.length>30?(Q([].concat(Object(j.a)(M),Object(j.a)(F.slice(30*T,30*T+30)))),H((function(e){return e+1})),B(!1)):B(!1)}),[A]),Object(s.useEffect)((function(){$(re)}),[re]),Object(s.useEffect)((function(){H(1),Q(F.slice(0,30))}),[F]),Object(s.useEffect)((function(){v||h.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){console.log("test"),localStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),y((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){C(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",se),function(){window.removeEventListener("scroll",se)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){$(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",ae),function(){window.removeEventListener("popstate",ae)}}),[]);var se=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&B(!0)},ne=function(){q(!0),h.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),q((function(){return J(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),w&&(y(!0),C(!1))})).catch((function(){q(!1),$(oe)}))},ae=function(){history.state&&f(history.state.searchValue)},oe=Object(g.jsx)(n.v,{onClose:function(){return $(null)},before:Object(g.jsx)(b.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(n.g,{vertical:"top",filled:"true",children:Object(g.jsx)(n.u,{readOnly:!v||X,value:l,onChange:function(e){return X?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""),f(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(g.jsxs)(n.i,{style:{paddingTop:40},children:[!v&&!w&&Object(g.jsx)(n.q,{}),w&&Object(g.jsx)(n.s,{onRefresh:ne,isFetching:X,style:{minHeight:350},children:Object(g.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),v&&!w&&Object(g.jsxs)(n.s,{onRefresh:ne,isFetching:X,style:{minHeight:350},children:[Object(g.jsx)(n.k,{children:F.length>0&&M.map((function(t){return Object(g.jsx)(n.d,{disabled:!0,before:Object(g.jsxs)(n.j,{onClick:function(){ce(t.name),$(null)},children:[te.includes(t.name)&&Object(g.jsx)(u.a,{fill:"var(--accent)"}),!te.includes(t.name)&&Object(g.jsx)(a.a,{fill:"var(--accent)"})]}),after:Object(g.jsx)(n.j,{onClick:function(){var c;c=t.name,e.onGroupSelect(c)},children:Object(g.jsx)(d.a,{fill:"var(--icon_tertiary)"})}),children:t.name},t.id)}))}),0===F.length&&Object(g.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),Z]})]})};var x=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],u=i[1],f=Object(s.useState)(!!localStorage.getItem("teachers")),O=Object(r.a)(f,2),p=O[0],x=O[1],v=Object(s.useState)(!1),y=Object(r.a)(v,2),S=y[0],m=y[1],w=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")):[]),C=Object(r.a)(w,2),_=C[0],E=C[1],k=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),L=Object(r.a)(k,2),N=L[0],I=L[1],F=Object(s.useState)(history.state.groups_CurrentPage),J=Object(r.a)(F,2),P=J[0],V=J[1],T=Object(s.useState)(!1),H=Object(r.a)(T,2),R=H[0],G=H[1],A=Object(s.useState)(!1),B=Object(r.a)(A,2),z=B[0],W=B[1],X=Object(s.useState)([]),q=Object(r.a)(X,2),D=q[0],K=q[1],M=Object(s.useState)(null),Q=Object(r.a)(M,2),U=Q[0],Y=Q[1];Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),I(_.filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){R&&N.length>30?(K([].concat(Object(j.a)(D),Object(j.a)(N.slice(30*P,30*P+30)))),V((function(e){return e+1})),G(!1)):G(!1)}),[R]),Object(s.useEffect)((function(){V(1),K(N.slice(0,30))}),[N]),Object(s.useEffect)((function(){p||h.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),x((function(){return I(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){m(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",Z),function(){window.removeEventListener("scroll",Z)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){Y(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",ee),function(){window.removeEventListener("popstate",ee)}}),[]);var Z=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&G(!0)},$=function(){W(!0),h.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),W((function(){return I(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),S&&(x(!0),m(!1))})).catch((function(){W(!1),Y(te)}))},ee=function(){history.state&&u(history.state.searchValue)},te=Object(g.jsx)(n.v,{onClose:function(){return Y(null)},before:Object(g.jsx)(b.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(n.g,{vertical:"top",filled:"true",children:Object(g.jsx)(n.u,{readOnly:!p||z,value:l,onChange:function(e){return z?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,groups_activePanel:"teachers-list",groups_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,groups_activePanel:"teachers-list",groups_contextOpened:!1,body_overflow:"visible"},""),u(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(g.jsxs)(n.i,{style:{paddingTop:40},children:[!p&&!S&&Object(g.jsx)(n.q,{}),S&&Object(g.jsx)(n.s,{onRefresh:$,isFetching:z,style:{minHeight:350},children:Object(g.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"})}),p&&!S&&Object(g.jsxs)(n.s,{onRefresh:$,isFetching:z,style:{minHeight:350},children:[Object(g.jsx)(n.k,{children:N.length>0&&D.map((function(e){return Object(g.jsx)(n.d,{disabled:!0,before:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(n.j,{onClick:function(){Y(null)},children:Object(g.jsx)(a.a,{fill:"var(--accent)"})}),Object(g.jsx)(n.c,{src:e.photoLink})]}),after:Object(g.jsx)(n.j,{onClick:function(){},children:Object(g.jsx)(d.a,{fill:"var(--icon_tertiary)"})}),description:e.rank,children:e.fullName},e.id)}))}),0===N.length&&Object(g.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),U]})]})};t.default=function(){var e=Object(n.D)().viewWidth,t=Object(n.E)(),c=e>=n.C.TABLET,j=t!==n.A,b=Object(s.useState)("favorites"),d=Object(r.a)(b,2),f=d[0],h=d[1],v=Object(s.useState)("groups-list"),y=Object(r.a)(v,2),S=y[0],m=y[1],w=Object(s.useState)(""),C=Object(r.a)(w,2),_=C[0],E=C[1],k=Object(s.useState)(!1),L=Object(r.a)(k,2),N=L[0],I=L[1],F=Object(s.useState)(null),J=Object(r.a)(F,2),P=J[0],V=J[1],T=Object(O.a)(),H=T.favoriteGroups,R=T.toggleGroupsFavoriteFlag,G=T.toggleFlagErrorSnackbar;Object(s.useEffect)((function(){history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},"")}),[]),Object(s.useEffect)((function(){V(G)}),[G]),Object(s.useEffect)((function(){return window.addEventListener("popstate",B),function(){window.removeEventListener("popstate",B)}}),[]);var A=function(e){V(null),history.pushState({activeStory:e.currentTarget.dataset.story,searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""),h(e.currentTarget.dataset.story)},B=function(){history.state&&(I(history.state.groups_contextOpened),h(history.state.activeStory),m(history.state.groups_activePanel),document.body.style.overflow=history.state.body_overflow)},z=function(){if(N)history.back();else{var e=history.state;e.groups_contextOpened=!0,e.body_overflow="hidden",document.body.style.overflow="hidden",history.pushState(e,""),I(!0)}};return Object(g.jsxs)(n.x,{header:j&&Object(g.jsx)(n.m,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(g.jsx)(n.w,{fixed:!0,width:280,maxWidth:280,children:Object(g.jsxs)(n.l,{children:[j&&Object(g.jsx)(n.m,{}),Object(g.jsxs)(n.i,{children:[Object(g.jsx)(n.d,{disabled:"favorites"===f,style:"favorites"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:A,before:Object(g.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(g.jsx)(n.d,{disabled:"groups"===f,style:"groups"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:A,before:Object(g.jsx)(o.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(g.jsx)(n.d,{disabled:"teachers"===f,style:"teachers"===f?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:A,before:Object(g.jsx)(i.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(g.jsx)(n.w,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(g.jsxs)(n.f,{activeStory:f,tabbar:!c&&Object(g.jsxs)(n.y,{children:[Object(g.jsx)(n.z,{onClick:A,selected:"favorites"===f,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(g.jsx)(a.a,{})}),Object(g.jsx)(n.z,{onClick:A,selected:"groups"===f,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(g.jsx)(o.a,{})}),Object(g.jsx)(n.z,{onClick:A,selected:"teachers"===f,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(g.jsx)(i.a,{})})]}),children:[Object(g.jsx)(n.B,{id:"favorites",activePanel:"favorites-list",children:Object(g.jsxs)(n.l,{id:"favorites-list",children:[Object(g.jsx)(n.m,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(g.jsx)(n.i,{style:{height:"1000px"},children:Object(g.jsx)(n.r,{icon:Object(g.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(g.jsxs)(n.B,{id:"groups",activePanel:S,children:[Object(g.jsxs)(n.l,{id:"groups-list",children:[Object(g.jsx)(n.m,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(g.jsx)(p,{onGroupSelect:function(e){history.pushState({activeStory:"groups",searchValue:"",isSearch:!1,groups_activePanel:"group-schedule",groups_contextOpened:!1,body_overflow:"visible"},""),E(e),m("group-schedule"),window.scrollTo(window.scrollX,0)}})]}),Object(g.jsxs)(n.l,{id:"group-schedule",children:[Object(g.jsx)(n.m,{left:Object(g.jsx)(n.n,{onClick:function(){return history.state.groups_contextOpened?history.go(-2):history.back()}}),children:Object(g.jsx)(n.o,{aside:Object(g.jsx)(l.a,{style:{transform:"rotate(".concat(N?"180deg":"0",")")}}),onClick:function(){return z()},children:_})}),Object(g.jsx)(n.p,{opened:N,onClose:function(){return z()},children:Object(g.jsx)(n.k,{children:Object(g.jsxs)(n.d,{before:Object(g.jsxs)(g.Fragment,{children:[H.includes(_)&&Object(g.jsx)(u.a,{fill:"var(--accent)"}),!H.includes(_)&&Object(g.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return function(e){z(),R(e)}(_)},children:[H.includes(_)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!H.includes(_)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(g.jsxs)(n.i,{style:{height:"1000px"},children:[Object(g.jsxs)(n.r,{icon:Object(g.jsx)(i.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",_]}),P]})]})]}),Object(g.jsx)(n.B,{id:"teachers",activePanel:"teachers-list",children:Object(g.jsxs)(n.l,{id:"teachers-list",children:[Object(g.jsx)(n.m,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(g.jsx)(x,{})]})})]})})]})}}}]);
//# sourceMappingURL=5.b2fa51d8.chunk.js.map