(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{177:function(e,t,c){"use strict";c.r(t);var r=c(16),s=c(0),n=c(8),a=c(172),o=c(173),i=c(174),l=c(175),u=c(171),j=c(22),d=c(20),h=c(141),b=c.n(h),f=c(23),O=c(5);var g=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],h=i[1],g=Object(s.useState)(!!localStorage.getItem("groups")),p=Object(r.a)(g,2),x=p[0],v=p[1],y=Object(s.useState)(!1),S=Object(r.a)(y,2),m=S[0],w=S[1],C=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),_=Object(r.a)(C,2),k=_[0],E=_[1],L=Object(s.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),N=Object(r.a)(L,2),I=N[0],F=N[1],P=Object(s.useState)(history.state.groups_CurrentPage),T=Object(r.a)(P,2),J=T[0],V=T[1],H=Object(s.useState)(!1),R=Object(r.a)(H,2),A=R[0],G=R[1],X=Object(s.useState)(!1),W=Object(r.a)(X,2),q=W[0],z=W[1],B=Object(s.useState)([]),D=Object(r.a)(B,2),K=D[0],M=D[1],Q=Object(s.useState)(null),U=Object(r.a)(Q,2),Y=U[0],Z=U[1],$=Object(f.a)(),ee=$.favoriteGroups,te=$.toggleGroupsFavoriteFlag;Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),F(k.filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){A&&I.length>30?(M([].concat(Object(j.a)(K),Object(j.a)(I.slice(30*J,30*J+30)))),V((function(e){return e+1})),G(!1)):G(!1)}),[A]),Object(s.useEffect)((function(){V(1),M(I.slice(0,30))}),[I]),Object(s.useEffect)((function(){x||b.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){console.log("test"),localStorage.setItem("groups",JSON.stringify(e.data)),E(e.data),v((function(){return F(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){w(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",ce),function(){window.removeEventListener("scroll",ce)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){Z(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",se),function(){window.removeEventListener("popstate",se)}}),[]);var ce=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&G(!0)},re=function(){z(!0),b.a.get("https://iis.bsuir.by/api/v1/student-groups",{signal:c.signal}).then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),E(e.data),z((function(){return F(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),m&&(v(!0),w(!1))})).catch((function(){z(!1),Z(ne)}))},se=function(){history.state&&h(history.state.searchValue)},ne=Object(O.jsx)(n.w,{onClose:function(){return Z(null)},before:Object(O.jsx)(d.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.g,{vertical:"top",filled:"true",children:Object(O.jsx)(n.u,{readOnly:!x||q,value:l,onChange:function(e){return q?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"groups",searchValue:e.target.value,isSearch:!0,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},""),h(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(O.jsxs)(n.i,{style:{paddingTop:40},children:[!x&&!m&&Object(O.jsx)(n.q,{}),m&&Object(O.jsx)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:Object(O.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),x&&!m&&Object(O.jsxs)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:[Object(O.jsx)(n.k,{children:I.length>0&&K.map((function(t){return Object(O.jsx)(n.v,{onClick:function(){var c;c=t.name,e.onGroupSelect(c)},expandable:!0,before:Object(O.jsxs)(n.j,{onClick:function(e){return function(e,t){e.stopPropagation(),te(t),Z(null)}(e,t.name)},children:[ee.includes(t.name)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!ee.includes(t.name)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),children:t.name},t.id)}))}),0===I.length&&Object(O.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),Y]})]})};var p=function(e){var t=Object(s.useState)(new AbortController),c=Object(r.a)(t,1)[0],o=Object(s.useState)(history.state.searchValue),i=Object(r.a)(o,2),l=i[0],h=i[1],g=Object(s.useState)(!!localStorage.getItem("teachers")),p=Object(r.a)(g,2),x=p[0],v=p[1],y=Object(s.useState)(!1),S=Object(r.a)(y,2),m=S[0],w=S[1],C=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")):[]),_=Object(r.a)(C,2),k=_[0],E=_[1],L=Object(s.useState)(localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})):[]),N=Object(r.a)(L,2),I=N[0],F=N[1],P=Object(s.useState)(history.state.groups_CurrentPage),T=Object(r.a)(P,2),J=T[0],V=T[1],H=Object(s.useState)(!1),R=Object(r.a)(H,2),A=R[0],G=R[1],X=Object(s.useState)(!1),W=Object(r.a)(X,2),q=W[0],z=W[1],B=Object(s.useState)([]),D=Object(r.a)(B,2),K=D[0],M=D[1],Q=Object(s.useState)(null),U=Object(r.a)(Q,2),Y=U[0],Z=U[1],$=Object(f.a)(),ee=$.favoriteTeachers,te=$.toggleTeachersFavoriteFlag;Object(s.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=l,history.replaceState(e,""),F(k.filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1})))}),[l]),Object(s.useEffect)((function(){A&&I.length>30?(M([].concat(Object(j.a)(K),Object(j.a)(I.slice(30*J,30*J+30)))),V((function(e){return e+1})),G(!1)):G(!1)}),[A]),Object(s.useEffect)((function(){V(1),M(I.slice(0,30))}),[I]),Object(s.useEffect)((function(){x||b.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),v((function(){return F(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!0}))})).catch((function(){w(!0)}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",ce),function(){window.removeEventListener("scroll",ce)}}),[]),Object(s.useEffect)((function(){return function(){c.abort()}}),[]),Object(s.useEffect)((function(){return function(){Z(null)}}),[]),Object(s.useEffect)((function(){return window.addEventListener("popstate",se),function(){window.removeEventListener("popstate",se)}}),[]);var ce=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&G(!0)},re=function(){z(!0),b.a.get("https://iis.bsuir.by/api/v1/employees/all",{signal:c.signal}).then((function(e){var t=e.data.map((function(e){return e.fullName=e.lastName+" "+e.firstName+" "+e.middleName,e}));localStorage.setItem("teachers",JSON.stringify(t)),E(t),z((function(){return F(JSON.parse(localStorage.getItem("teachers")).filter((function(e){return e.fullName.toLowerCase().indexOf(l.toLowerCase())>-1}))),!1})),m&&(v(!0),w(!1))})).catch((function(){z(!1),Z(ne)}))},se=function(){history.state&&h(history.state.searchValue)},ne=Object(O.jsx)(n.w,{onClose:function(){return Z(null)},before:Object(O.jsx)(d.a,{fill:"var(--dynamic_red)",width:24,height:24}),duration:1700,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.g,{vertical:"top",filled:"true",children:Object(O.jsx)(n.u,{readOnly:!x||q,value:l,onChange:function(e){return q?function(){}:function(e){history.state.isSearch?history.replaceState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,teachers_activePanel:"teachers-list",teachers_contextOpened:!1,body_overflow:"visible"},""):history.pushState({activeStory:"teachers",searchValue:e.target.value,isSearch:!0,teachers_activePanel:"teachers-list",teachers_contextOpened:!1,body_overflow:"visible"},""),h(e.target.value)}(e)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(O.jsxs)(n.i,{style:{paddingTop:40},children:[!x&&!m&&Object(O.jsx)(n.q,{}),m&&Object(O.jsx)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:Object(O.jsx)(n.r,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"})}),x&&!m&&Object(O.jsxs)(n.s,{onRefresh:re,isFetching:q,style:{minHeight:350},children:[Object(O.jsx)(n.k,{children:I.length>0&&K.map((function(t){return Object(O.jsx)(n.v,{onClick:function(){return c=t.id,void e.onTeacherSelect(c);var c},before:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(n.j,{onClick:function(e){return function(e,t){e.stopPropagation(),te(t),Z(null)}(e,t.id)},children:[ee.includes(t.id)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!ee.includes(t.id)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),Object(O.jsx)(n.c,{src:t.photoLink})]}),description:t.rank,children:t.fullName},t.id)}))}),0===I.length&&Object(O.jsx)(n.h,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),Y]})]})};t.default=function(){var e=Object(n.E)().viewWidth,t=Object(n.F)(),c=e>=n.D.TABLET,j=t!==n.B,d=Object(s.useState)("favorites"),h=Object(r.a)(d,2),b=h[0],x=h[1],v=Object(s.useState)("groups-list"),y=Object(r.a)(v,2),S=y[0],m=y[1],w=Object(s.useState)("teachers-list"),C=Object(r.a)(w,2),_=C[0],k=C[1],E=Object(s.useState)(""),L=Object(r.a)(E,2),N=L[0],I=L[1],F=Object(s.useState)({}),P=Object(r.a)(F,2),T=P[0],J=P[1],V=Object(s.useState)(!1),H=Object(r.a)(V,2),R=H[0],A=H[1],G=Object(s.useState)(!1),X=Object(r.a)(G,2),W=X[0],q=X[1],z=Object(s.useState)(null),B=Object(r.a)(z,2),D=B[0],K=B[1],M=Object(f.a)(),Q=M.favoriteGroups,U=M.toggleGroupsFavoriteFlag,Y=M.favoriteTeachers,Z=M.toggleTeachersFavoriteFlag,$=M.errorSnackbar;Object(s.useEffect)((function(){history.pushState({activeStory:"favorites",searchValue:"",isSearch:!1,groups_activePanel:"groups-list",groups_contextOpened:!1,body_overflow:"visible"},"")}),[]),Object(s.useEffect)((function(){K($)}),[$]),Object(s.useEffect)((function(){return window.addEventListener("popstate",te),function(){window.removeEventListener("popstate",te)}}),[]);var ee=function(e){K(null),history.pushState({activeStory:e.currentTarget.dataset.story,searchValue:"",isSearch:!1,groups_activePanel:"groups-list",teachers_activePanel:"teachers-list",groups_contextOpened:!1,body_overflow:"visible"},""),m("groups-list"),k("teachers-list"),x(e.currentTarget.dataset.story)},te=function(){history.state&&(A(history.state.groups_contextOpened),q(history.state.teachers_contextOpened),x(history.state.activeStory),m(history.state.groups_activePanel),k(history.state.teachers_activePanel),document.body.style.overflow=history.state.body_overflow)},ce=function(){if(R)history.back();else{var e=history.state;e.groups_contextOpened=!0,e.body_overflow="hidden",document.body.style.overflow="hidden",history.pushState(e,""),A(!0)}},re=function(){if(W)history.back();else{var e=history.state;e.teachers_contextOpened=!0,e.body_overflow="hidden",document.body.style.overflow="hidden",history.pushState(e,""),q(!0)}};return Object(O.jsxs)(n.y,{header:j&&Object(O.jsx)(n.m,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(O.jsx)(n.x,{fixed:!0,width:280,maxWidth:280,children:Object(O.jsxs)(n.l,{children:[j&&Object(O.jsx)(n.m,{}),Object(O.jsxs)(n.i,{children:[Object(O.jsx)(n.d,{disabled:"favorites"===b,style:"favorites"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:ee,before:Object(O.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(n.d,{disabled:"groups"===b,style:"groups"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:ee,before:Object(O.jsx)(o.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(n.d,{disabled:"teachers"===b,style:"teachers"===b?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:ee,before:Object(O.jsx)(i.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(O.jsx)(n.x,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(O.jsxs)(n.f,{activeStory:b,tabbar:!c&&Object(O.jsxs)(n.z,{children:[Object(O.jsx)(n.A,{onClick:ee,selected:"favorites"===b,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(O.jsx)(a.a,{})}),Object(O.jsx)(n.A,{onClick:ee,selected:"groups"===b,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(O.jsx)(o.a,{})}),Object(O.jsx)(n.A,{onClick:ee,selected:"teachers"===b,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(O.jsx)(i.a,{})})]}),children:[Object(O.jsx)(n.C,{id:"favorites",activePanel:"favorites-list",children:Object(O.jsxs)(n.l,{id:"favorites-list",children:[Object(O.jsx)(n.m,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(O.jsx)(n.i,{style:{height:"1000px"},children:Object(O.jsx)(n.r,{icon:Object(O.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(O.jsxs)(n.C,{id:"groups",activePanel:S,children:[Object(O.jsxs)(n.l,{id:"groups-list",children:[Object(O.jsx)(n.m,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(O.jsx)(g,{onGroupSelect:function(e){history.pushState({activeStory:"groups",searchValue:"",isSearch:!1,groups_activePanel:"group-schedule",groups_contextOpened:!1,body_overflow:"visible"},""),I(e),m("group-schedule"),window.scrollTo(window.scrollX,0)}}),D]}),Object(O.jsxs)(n.l,{id:"group-schedule",children:[Object(O.jsx)(n.m,{before:Object(O.jsx)(n.n,{onClick:function(){return R?history.go(-2):history.back()}}),children:Object(O.jsx)(n.o,{aside:Object(O.jsx)(l.a,{style:{transform:"rotate(".concat(R?"180deg":"0",")")}}),onClick:function(){return ce()},children:N})}),Object(O.jsx)(n.p,{opened:R,onClose:function(){return ce()},children:Object(O.jsx)(n.k,{children:Object(O.jsxs)(n.d,{before:Object(O.jsxs)(O.Fragment,{children:[Q.includes(N)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!Q.includes(N)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return function(e){ce(),U(e)}(N)},children:[Q.includes(N)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!Q.includes(N)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(O.jsxs)(n.i,{style:{height:"1000px"},children:[Object(O.jsxs)(n.r,{icon:Object(O.jsx)(o.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",N]}),D]})]})]}),Object(O.jsxs)(n.C,{id:"teachers",activePanel:_,children:[Object(O.jsxs)(n.l,{id:"teachers-list",children:[Object(O.jsx)(n.m,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(O.jsx)(p,{onTeacherSelect:function(e,t){history.pushState({activeStory:"teachers",searchValue:"",isSearch:!1,teachers_activePanel:"teacher-schedule",teachers_contextOpened:!1,body_overflow:"visible"},"");var c=localStorage.getItem("teachers")?JSON.parse(localStorage.getItem("teachers")):[];J(c.find((function(t){return t.id===e}))),k("teacher-schedule"),window.scrollTo(window.scrollX,0)}}),D]}),Object(O.jsxs)(n.l,{id:"teacher-schedule",children:[Object(O.jsx)(n.m,{before:Object(O.jsx)(n.n,{onClick:function(){return W?history.go(-2):history.back()}}),children:Object(O.jsx)(n.o,{aside:Object(O.jsx)(l.a,{style:{transform:"rotate(".concat(W?"180deg":"0",")")}}),onClick:function(){return re()},before:Object(O.jsx)(n.c,{size:36,src:T.photoLink}),status:T.rank,children:T.fullName})}),Object(O.jsx)(n.p,{opened:W,onClose:function(){return re()},children:Object(O.jsx)(n.k,{children:Object(O.jsxs)(n.d,{before:Object(O.jsxs)(O.Fragment,{children:[Y.includes(T.id)&&Object(O.jsx)(u.a,{fill:"var(--accent)"}),!Y.includes(T.id)&&Object(O.jsx)(a.a,{fill:"var(--accent)"})]}),onClick:function(){return e=T.id,re(),void Z(e);var e},children:[Y.includes(T.id)&&'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"',!Y.includes(T.id)&&'\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 "\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"']})})}),Object(O.jsxs)(n.i,{style:{height:"1000px"},children:[Object(O.jsxs)(n.r,{icon:Object(O.jsx)(i.a,{width:56,height:56}),children:["\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f ",T.fullName]}),D]})]})]})]})})]})}}}]);
//# sourceMappingURL=5.6cac273a.chunk.js.map