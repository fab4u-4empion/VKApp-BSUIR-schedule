(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{174:function(e,t,c){"use strict";c.r(t);var s=c(144),r=c(0),a=c(11),n=c(170),i=c(171),o=c(172),j=c(167),l=c(168),u=c(169),d=c(145),b=c.n(d),O=c(13),h=c.n(O),f=c(9);var g=function(){var e=Object(r.useState)(history.state.searchValue),t=Object(s.a)(e,2),c=t[0],i=t[1],o=Object(r.useState)(null),d=Object(s.a)(o,2),O=d[0],g=d[1],x=Object(r.useState)(!!localStorage.getItem("groups")),p=Object(s.a)(x,2),v=p[0],S=p[1],y=Object(r.useState)(!1),w=Object(s.a)(y,2),m=w[0],C=w[1],k=Object(r.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")):[]),E=Object(s.a)(k,2),L=E[0],I=E[1],J=Object(r.useState)(localStorage.getItem("groups")?JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1})):[]),N=Object(s.a)(J,2),F=N[0],T=N[1],_=Object(r.useState)(1),R=Object(s.a)(_,2),V=R[0],W=R[1],A=Object(r.useState)(!1),P=Object(s.a)(A,2),H=P[0],q=P[1],z=Object(r.useState)(!1),B=Object(s.a)(z,2),K=B[0],X=B[1],D=Object(r.useState)([]),G=Object(s.a)(D,2),M=G[0],Q=G[1],U=Object(r.useState)(sessionStorage.getItem("groupsFavorite")?JSON.parse(sessionStorage.getItem("groupsFavorite")):[]),Y=Object(s.a)(U,2),Z=Y[0],$=Y[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=history.state;e.searchValue=c,history.replaceState(e,""),T(L.filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1})))}),[c]),Object(r.useEffect)((function(){H&&(Q([].concat(Object(j.a)(M),Object(j.a)(F.slice(30*V,30*V+30)))),W((function(e){return e+1})),q(!1))}),[H]),Object(r.useEffect)((function(){W(1),Q(F.slice(0,30))}),[F]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(Z))}),[Z]),Object(r.useEffect)((function(){v||b.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),I(e.data),S((function(){return T(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1}))),!0}))})).catch((function(){C(!0)}))}),[]),Object(r.useEffect)((function(){return window.addEventListener("scroll",ee),function(){window.removeEventListener("scroll",ee)}}),[]);var ee=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&q(!0)},te=function(){X(!0),b.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){localStorage.setItem("groups",JSON.stringify(e.data)),I(e.data),X((function(){return T(JSON.parse(localStorage.getItem("groups")).filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1}))),!1})),m&&(S(!0),C(!1))})).catch((function(){X(!1),g(ce)}))},ce=Object(f.jsx)(a.r,{onClose:function(){return g(null)},before:Object(f.jsx)(l.a,{fill:"var(--dynamic_red)",width:24,height:24}),children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(a.f,{vertical:"top",filled:"true",children:Object(f.jsx)(a.q,{readOnly:!v,value:c,onChange:function(e){return i(e.target.value)},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(f.jsxs)(a.h,{style:{paddingTop:40},children:[!v&&!m&&Object(f.jsx)(a.m,{}),m&&Object(f.jsx)(a.o,{onRefresh:te,isFetching:K,children:Object(f.jsx)(a.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}),v&&!m&&Object(f.jsxs)(a.o,{onRefresh:te,isFetching:K,children:[Object(f.jsx)(a.j,{children:v&&F.length>0&&M.map((function(e){return Object(f.jsx)(a.c,{after:Object(f.jsxs)(a.i,{onClick:function(){!function(e){var t=Object(j.a)(Z);Z.includes(e)?(t.splice(Z.indexOf(e),1),$(t)):(t.push(e),$(t)),h.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[Z.includes(e.id)&&Object(f.jsx)(u.a,{}),!Z.includes(e.id)&&Object(f.jsx)(n.a,{})]}),children:e.name},e.id)}))}),0===F.length&&Object(f.jsx)(a.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}),O]})]})};t.default=function(){var e=Object(a.z)().viewWidth,t=Object(a.A)(),c=e>=a.y.TABLET,j=t!==a.w,l=Object(r.useState)("favorites"),u=Object(s.a)(l,2),d=u[0],b=u[1];Object(r.useEffect)((function(){history.pushState({title:"navigation",activeStory:"favorites",searchValue:""},"")}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",h),function(){window.removeEventListener("popstate",h)}}),[]);var O=function(e){history.pushState({title:"navigation",activeStory:e.currentTarget.dataset.story,searchValue:""},""),b(e.currentTarget.dataset.story)},h=function(){history.state&&"navigation"===history.state.title&&b(history.state.activeStory)};return Object(f.jsxs)(a.t,{header:j&&Object(f.jsx)(a.l,{separator:!1}),style:{justifyContent:"center"},children:[c&&Object(f.jsx)(a.s,{fixed:!0,width:280,maxWidth:280,children:Object(f.jsxs)(a.k,{children:[j&&Object(f.jsx)(a.l,{}),Object(f.jsxs)(a.h,{children:[Object(f.jsx)(a.c,{disabled:"favorites"===d,style:"favorites"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:O,before:Object(f.jsx)(n.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(a.c,{disabled:"groups"===d,style:"groups"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:O,before:Object(f.jsx)(i.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(a.c,{disabled:"teachers"===d,style:"teachers"===d?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:O,before:Object(f.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(f.jsx)(a.s,{animate:!c,spaced:c,width:c?"560px":"100%",maxWidth:c?"560px":"100%",children:Object(f.jsxs)(a.e,{activeStory:d,tabbar:!c&&Object(f.jsxs)(a.u,{children:[Object(f.jsx)(a.v,{onClick:O,selected:"favorites"===d,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(f.jsx)(n.a,{})}),Object(f.jsx)(a.v,{onClick:O,selected:"groups"===d,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(f.jsx)(i.a,{})}),Object(f.jsx)(a.v,{onClick:O,selected:"teachers"===d,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(f.jsx)(o.a,{})})]}),children:[Object(f.jsx)(a.x,{id:"favorites",activePanel:"favorites-list",children:Object(f.jsxs)(a.k,{id:"favorites-list",children:[Object(f.jsx)(a.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(f.jsx)(a.h,{style:{height:"1000px"},children:Object(f.jsx)(a.n,{icon:Object(f.jsx)(n.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(f.jsx)(a.x,{id:"groups",activePanel:"groups-list",children:Object(f.jsxs)(a.k,{id:"groups-list",children:[Object(f.jsx)(a.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(f.jsx)(g,{})]})}),Object(f.jsx)(a.x,{id:"teachers",activePanel:"teachers-list",children:Object(f.jsxs)(a.k,{id:"teachers-list",children:[Object(f.jsx)(a.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(f.jsx)(a.h,{style:{height:"1000px"},children:Object(f.jsx)(a.n,{icon:Object(f.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.e7c33bf5.chunk.js.map