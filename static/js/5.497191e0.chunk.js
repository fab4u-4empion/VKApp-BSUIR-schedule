(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[5],{176:function(e,t,s){"use strict";s.r(t);var c=s(147),r=s(0),n=s(11),a=s(172),i=s(173),o=s(174),j=s(170),d=s(171),l=s(148),u=s.n(l),b=s(12),O=s.n(b),h=s(8);var f=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),s=t[0],i=t[1],o=Object(r.useState)(!0),l=Object(c.a)(o,2),b=l[0],f=l[1],x=Object(r.useState)(!1),g=Object(c.a)(x,2),p=g[0],v=g[1],y=Object(r.useState)(!1),S=Object(c.a)(y,2),w=S[0],m=S[1],k=Object(r.useState)([]),C=Object(c.a)(k,2),E=C[0],L=C[1],J=Object(r.useState)([]),I=Object(c.a)(J,2),N=I[0],T=I[1],_=Object(r.useState)(1),V=Object(c.a)(_,2),F=V[0],W=V[1],P=Object(r.useState)(!1),R=Object(c.a)(P,2),q=R[0],A=R[1],H=Object(r.useState)([]),B=Object(c.a)(H,2),K=B[0],X=B[1],z=Object(r.useState)([]),D=Object(c.a)(z,2),G=D[0],M=D[1];Object(r.useEffect)((function(){window.scrollTo(window.scrollX,0);var e=s.toLowerCase();T(E.filter((function(t){return t.name.toLowerCase().indexOf(e)>-1})))}),[s]),Object(r.useEffect)((function(){q&&(X([].concat(Object(j.a)(K),Object(j.a)(N.slice(30*F,30*F+30)))),W((function(e){return e+1})),A(!1))}),[q]),Object(r.useEffect)((function(){W(1),X(N.slice(0,30))}),[N]),Object(r.useEffect)((function(){sessionStorage.getItem("groups")?(L(JSON.parse(sessionStorage.getItem("groups"))),v((function(){var e=s.toLowerCase();return T(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))),!0}))):u.a.get("https://journal.bsuir.by/api/v1/groups").then((function(e){sessionStorage.setItem("groups",JSON.stringify(e.data)),L(e.data),v((function(){var e=s.toLowerCase();return T(JSON.parse(sessionStorage.getItem("groups")).filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))),!0}))})).catch((function(){m(!0)}))}),[]),Object(r.useEffect)((function(){sessionStorage.getItem("groupsFavorite")&&M(JSON.parse(sessionStorage.getItem("groupsFavorite")))}),[]),Object(r.useEffect)((function(){sessionStorage.setItem("groupsFavorite",JSON.stringify(G))}),[G]),Object(r.useEffect)((function(){return window.addEventListener("scroll",Q),function(){window.removeEventListener("scroll",Q)}}),[]),Object(r.useEffect)((function(){return window.addEventListener("popstate",U),function(){window.removeEventListener("popstate",U)}}),[]);var Q=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&A(!0)},U=function(){history.state&&"search"===history.state.title&&i(history.state.searchValue)};return Object(h.jsxs)("span",{children:[Object(h.jsx)(n.f,{vertical:"top",filled:"true",children:Object(h.jsx)(n.p,{readOnly:!p,value:s,onChange:function(e){return t=e.target.value,b?(history.pushState({title:"search",searchValue:""},""),history.pushState({title:"search",searchValue:t},""),f(!1)):history.replaceState({title:"search",searchValue:t},""),void i(t);var t},after:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(h.jsxs)(n.h,{style:{paddingTop:40},children:[Object(h.jsx)(n.j,{children:p&&N.length>0&&K.map((function(e){return Object(h.jsx)(n.c,{after:Object(h.jsxs)(n.i,{onClick:function(){!function(e){var t=Object(j.a)(G);G.includes(e)?(t.splice(G.indexOf(e),1),M(t)):(t.push(e),M(t)),O.a.send("VKWebAppStorageSet",{key:"groupsFavorite",value:JSON.stringify(t)})}(e.id)},children:[G.includes(e.id)&&Object(h.jsx)(d.a,{}),!G.includes(e.id)&&Object(h.jsx)(a.a,{})]}),children:e.name},e.id)}))}),!p&&!w&&Object(h.jsx)(n.m,{}),p&&0===N.length&&Object(h.jsx)(n.g,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),w&&Object(h.jsx)(n.n,{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})]})]})};t.default=function(){var e=Object(n.x)().viewWidth,t=Object(n.y)(),s=e>=n.w.TABLET,j=t!==n.u,d=Object(r.useState)("favorites"),l=Object(c.a)(d,2),u=l[0],b=l[1],O=function(e){return b(e.currentTarget.dataset.story)};return Object(h.jsxs)(n.r,{header:j&&Object(h.jsx)(n.l,{separator:!1}),style:{justifyContent:"center"},children:[s&&Object(h.jsx)(n.q,{fixed:!0,width:280,maxWidth:280,children:Object(h.jsxs)(n.k,{children:[j&&Object(h.jsx)(n.l,{}),Object(h.jsxs)(n.h,{children:[Object(h.jsx)(n.c,{disabled:"favorites"===u,style:"favorites"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"favorites",onClick:O,before:Object(h.jsx)(a.a,{}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.c,{disabled:"groups"===u,style:"groups"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"groups",onClick:O,before:Object(h.jsx)(i.a,{}),children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(n.c,{disabled:"teachers"===u,style:"teachers"===u?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"teachers",onClick:O,before:Object(h.jsx)(o.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"})]})]})}),Object(h.jsx)(n.q,{animate:!s,spaced:s,width:s?"560px":"100%",maxWidth:s?"560px":"100%",children:Object(h.jsxs)(n.e,{activeStory:u,tabbar:!s&&Object(h.jsxs)(n.s,{children:[Object(h.jsx)(n.t,{onClick:O,selected:"favorites"===u,"data-story":"favorites",text:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:Object(h.jsx)(a.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"groups"===u,"data-story":"groups",text:"\u0413\u0440\u0443\u043f\u043f\u044b",children:Object(h.jsx)(i.a,{})}),Object(h.jsx)(n.t,{onClick:O,selected:"teachers"===u,"data-story":"teachers",text:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(h.jsx)(o.a,{})})]}),children:[Object(h.jsx)(n.v,{id:"favorites",activePanel:"favorites-list",children:Object(h.jsxs)(n.k,{id:"favorites-list",children:[Object(h.jsx)(n.l,{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(a.a,{width:56,height:56}),children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})]})}),Object(h.jsx)(n.v,{id:"groups",activePanel:"groups-list",children:Object(h.jsxs)(n.k,{id:"groups-list",children:[Object(h.jsx)(n.l,{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)(f,{})]})}),Object(h.jsx)(n.v,{id:"teachers",activePanel:"teachers-list",children:Object(h.jsxs)(n.k,{id:"teachers-list",children:[Object(h.jsx)(n.l,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(h.jsx)(n.h,{style:{height:"1000px"},children:Object(h.jsx)(n.n,{icon:Object(h.jsx)(o.a,{width:56,height:56}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0435\u0442\u043b\u0438"})})]})})]})})]})}}}]);
//# sourceMappingURL=5.497191e0.chunk.js.map